<header><h1>&quot;You do not have permission to change your password&quot; error message</h1></header><div class='kb-notice-section section'>Rory McCaw MVP</div><div class='kb-notice-section section'><div class='kb-disclaimer-msi'>MICROSOFT CORPORATION AND/OR ITS RESPECTIVE SUPPLIERS MAKE NO REPRESENTATIONS ABOUT THE SUITABILITY, RELIABILITY, OR ACCURACY OF THE INFORMATION AND RELATED GRAPHICS CONTAINED HEREIN. ALL SUCH INFORMATION AND RELATED GRAPHICS ARE PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND. MICROSOFT AND/OR ITS RESPECTIVE SUPPLIERS HEREBY DISCLAIM ALL WARRANTIES AND CONDITIONS WITH REGARD TO THIS INFORMATION AND RELATED GRAPHICS, INCLUDING ALL IMPLIED WARRANTIES AND CONDITIONS OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, WORKMANLIKE EFFORT, TITLE AND NON-INFRINGEMENT.  YOU SPECIFICALLY AGREE THAT IN NO EVENT SHALL MICROSOFT AND/OR ITS SUPPLIERS BE LIABLE FOR ANY DIRECT, INDIRECT, PUNITIVE, INCIDENTAL, SPECIAL, CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER INCLUDING, WITHOUT LIMITATION, DAMAGES FOR LOSS OF USE, DATA OR PROFITS, ARISING OUT OF OR IN ANY WAY CONNECTED WITH THE USE OF OR INABILITY TO USE THE INFORMATION AND RELATED GRAPHICS CONTAINED HEREIN, WHETHER BASED ON CONTRACT, TORT, NEGLIGENCE, STRICT LIABILITY OR OTHERWISE, EVEN IF MICROSOFT OR ANY OF ITS SUPPLIERS HAS BEEN ADVISED OF THE POSSIBILITY OF DAMAGES.</div></div><div class='kb-summary-section section'><div class='indent'><span class='sbody-italic'>When a domain user authenticates to a Windows Server 2003 DC with SP1 from an XP Pro-SP1 computer and their password has expired, they receive a message &quot;Your password has expired and must be changed.&quot; </span></div></div><div class='kb-symptoms-section section'>When a domain user authenticates to a Windows Server 2003&#160;domain controller&#160;with SP1 from a Windows XP Professional-based computer with SP1 and their password has expired, they receive a message &quot;Your password has expired and must be changed.&quot; When they try to change their password, they receive the message: You Do Not Have Permission to Change Your Password.&quot; This is different from the message &quot;You are required to change your password at first logon&quot; which a user would receive when their user account properties have been set to &#39;User must change password at next logon&#39;. The error message &quot;Your password has expired and must be changed.&quot; is specific to accounts with expired passwords. This problem does not prevent a user with administrative permissions to force a password change for the user or restrict that user from then changing the password once successfully logged on and authenticated to the domain by using the CTRL + ALT + DEL key sequence and clicking &#39;Change Password&#39; in the Windows Security dialog box.</div><div class='kb-cause-section section'>In a Domain with GPO security restrictions in place, specific group policy settings change with the installation of Windows Server 2003 SP1 and can cause this problem. If you have followed and implemented the recommendations in the Windows Server 2003 Security guide, you&#160;may have configured the &#39;Network Access:&#160;Named pipes that can be accessed anonymously&#39;&#160;and set this to a blank value. This GPO setting makes changes to the registry key HKLM\System\CurrentControlSet\Services\LanManServer\Parameters\NullSessionPipes. On a domain controller running Windows Server 2003 without SP1, the default values are COMNAP, COMNODE, SQL\QUERY, SPOOLSS, LLSRPC, EPMAPPER, LOCATOR, TrkWks, TrkSvr but these values change when Windows Server 2003 SP1 is installed to include COMNAP, COMNODE, SQL\QUERY, SPOOLSS, LLSRPC, BROWSER, NETLOGON, Lsarpc, samr.<br>&#160;<br>If your existing GPO setting value is set to blank for the setting &#39;Network Access:&#160;Named pipes that can be accessed anonymously&#39; and Windows Server 2003 SP1 is applied, when you view the value of the registry key or run a RSOP in GPMC, the value will appear blank however when you open the GPO and view the setting, it appears with all of the new Windows Server 2003 default settings: COMNAP, COMNODE, SQL\QUERY, SPOOLSS, LLSRPC, BROWSER, NETLOGON, Lsarpc, samr. <br></div><div class='kb-resolution-section section'>To resolve this issue, open the GPO where the &#39;Network Access:&#160;Named pipes that can be accessed anonymously&#39;&#160;setting is configured, double click on the setting and clear the <strong class='sbody-strong'>Define this policy in the template </strong>check box and click <strong class='sbody-strong'>OK</strong>. Double click on the &#39;Network Access:&#160;Named pipes that can be accessed anonymously&#39;&#160;setting again and enable the <strong class='sbody-strong'>Define this policy in the template </strong>check box. Leave the new defaults that will be added automatically&#160;and click <strong class='sbody-strong'>OK</strong>. Close the Group Policy Object Editor and run <strong class='sbody-strong'>gpupdate /force </strong>at the <strong class='sbody-strong'>Command Prompt </strong>on your domain controllers to force the change or wait 5 minutes for the setting to take effect.</div><div class='kb-moreinformation-section section'>More information on similar error messages with different resolutions and causes can be found in KB316806, KB32881, and KB328817 as well as at  in tips 7344 and 7516.</div>