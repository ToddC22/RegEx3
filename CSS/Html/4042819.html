<header><h1>&quot;Unable to save permission changes&quot; when you propagate permissions</h1></header><p>When you propagate the permissions on an&nbsp;object such as an organizational unit (OU), group, user, or computer in Active Directory, you may receive the following error message:</p>

<div class="alert-band">
<div class="alert alert-info" role="alert">
<div class="row">
<div class="col-xs-24">
<p>Unable to save permission changes on <em>ObjectName</em>. A constraint violation occurred.</p>
</div>
</div>
</div>
</div>

<p>Every 30 minutes, the following event may appear in the Directory Services log on the domain controller:</p>

<div class="alert-band">
<div class="alert alert-info" role="alert">
<div class="row">
<div class="col-xs-24">
<p>Event Type:&nbsp; Error<br>
Event Source:&nbsp; NTDS SDPROP<br>
Event Category:&nbsp; Internal Processing<br>
Event ID:&nbsp; 1450<br>
User:&nbsp; NT AUTHORITY\ANONYMOUS LOGON<br>
Computer: <em>Computer Name</em><br>
Description:<br>
The security descriptor propagation task could not calculate a new security descriptor for the following object.<br>
&nbsp;<br>
Object:<br>
<em>Distinguished Name (DN) of Object</em><br>
&nbsp;<br>
This operation will be tried again later.<br>
&nbsp;<br>
User Action<br>
If this condition continues, attempt to view the status of this object and manually change the security descriptor.<br>
&nbsp;<br>
Additional Data<br>
Error value:<br>
1340 The inherited access control list (ACL) or access control entry (ACE) could not be built.</p>
</div>
</div>
</div>
</div>

<p><span><span><span><br>
You may also see the following event in the log:</span></span></span></p>

<div class="alert-band">
<div class="alert alert-info" role="alert">
<div class="row">
<div class="col-xs-24">
<p>Event Type:&nbsp; Error<br>
Event Source:&nbsp; NTDS SDPROP<br>
Event Category:&nbsp; Internal Processing<br>
Event ID:&nbsp; 1450<br>
User:&nbsp; NT AUTHORITY\ANONYMOUS LOGON<br>
Computer:&nbsp;<em>Computer Name</em><br>
Description:<br>
The security descriptor propagation task could not calculate a new security descriptor for the following object.<br>
&nbsp;<br>
Object:<br>
<em>Distinguished Name (DN) of Object</em><br>
&nbsp;<br>
This operation will be tried again later.<br>
&nbsp;<br>
User Action<br>
If this condition continues, attempt to view the status of this object and manually change the security descriptor.<br>
&nbsp;<br>
Additional Data<br>
Error value:<br>
53c %3</p>
</div>
</div>
</div>
</div>
<p>This issue occurs because size of the Access Control List (ACL) on the object exceeds 64 KB&nbsp;or approximately 1,820 Access Control Entries (ACEs), depending on the size of the ACEs.</p>
<p>To resolve this issue, remove entries from the ACL to reduce its size. You can run the following command to dump the ACEs of the object to determine if the errors are a result of an ACL size issue:</p>

<pre>
dsacls <em><span><span><span><span><span>DistinguishedNameOfTheProblematicObject</span></span></span></span></span></em>
</pre>

<p><span><span><span>For more information about the Dsacls tool, see the following Microsoft Knowledge Base article:</span></span></span></p>

<p><span><span><span><a href="http://support.microsoft.com/kb/281146" target="_blank"><span>281146</span></a> How to Use Dsacls.exe in Windows Server 2003 and Windows 2000</span></span></span></p>

<p><span><span><span>You can also use the LDP tool to view the security descriptor and its size. LDP is available in the Windows 2000 Server and Windows Server 2003 Support Tools. It is also available in the Remote Server Administration Tools (RSAT) for Windows Server 2008 and Windows Server 2008 R2 when the <strong>AD DS and AD LDS tools</strong> for the Role Administration Tools are installed. For more information, see the following article:</span></span></span></p>

<p><span><span><span><a href="http://support.microsoft.com/kb/941314" target="_blank"><span>941314 </span></a>Description of Windows Server 2008 Remote Server Administration Tools for Windows Vista Service Pack 1</span></span></span></p>

<p><span><span><span>To view the security descriptor size by using the LDP tool:</span></span></span></p>

<ol>
	<li><span><span><span><span>Launch LDP.exe.</span></span></span></span></li>
	<li><span><span><span><span>Choose <strong>Connect</strong> from the&nbsp;<strong>Connection</strong> menu,&nbsp;and then type the name of a domain controller where the&nbsp;<em>distinguished name (DN) of object&nbsp;</em>exists.</span></span></span></span></li>
	<li><span><span><span><span>Choose <strong>Bind</strong> from the&nbsp;<strong>Connect</strong> menu to log on by using administrative credentials. If the currently logged-on user has administrative rights, you can leave the credentials blank.</span></span></span></span></li>
	<li><span><span><span><span>Choose <strong>Security</strong> from the&nbsp;<strong>Browse</strong> menu,&nbsp;and then select&nbsp;<strong>Security</strong>.</span></span></span></span></li>
	<li><span><span><span><span>Type the&nbsp;<em><strong>distinguished name (DN) of object</strong></em>, choose <strong>text dump</strong>, and then click <strong>OK</strong>. The security descriptor will now appear in the right pane.</span></span></span></span></li>
</ol>

<p><span><span><span>If the security descriptor is long, it may scroll. The <strong>Ace<em>[# of ACE]</em></strong> type entries reveal the number of entries in the ACL. Add 1 to the last visible entry to determine the total number of ACE entries. Otherwise, you can choose to view the security descriptor in full after you <span><span><span>use LDP to</span></span></span>&nbsp;configure a&nbsp;sufficient number of lines. </span></span></span></p>

<p><span><span><span>To increase the number of lines in the right pane of LDP:</span></span></span></p>

<ol>
	<li><span><span><span><span>Choose <strong>General </strong>from the&nbsp;<strong>Options </strong>menu.</span></span></span></span></li>
	<li><span><span><span><span>Type a number of lines, such as 2048 or a value as required by&nbsp;the&nbsp;<strong>number of lines</strong> in the&nbsp;<strong>buffer size</strong> section.</span></span></span></span></li>
	<li><span><span><span><span>Repeat steps 4-5 in the previous procedure to view the security descriptor.</span></span></span></span></li>
</ol>

<p><span><span><span>You will then see output like this :</span></span></span></p>

<div class="alert-band">
<div class="alert alert-info" role="alert">
<div class="row">
<div class="col-xs-24">
<p>Security Descriptor:<br>
Security Descriptor:SD Revision: 1<br>
SD Control:&nbsp; 0x8c04<br>
&nbsp;&nbsp;SE_DACL_PRESENT<br>
&nbsp;&nbsp;SE_DACL_AUTO_INHERITED<br>
&nbsp;&nbsp;SE_SACL_AUTO_INHERITED<br>
&nbsp;&nbsp;SE_SELF_RELATIVE<br>
Owner: Contoso\AdminGuy [S-1-5-21-2127521184-1604012920-1887927527-25455]<br>
Group: Contoso\Domain Users [S-1-5-21-2127521184-1604012920-1887927527-513]<br>
DACL:<br>
&nbsp;Revision&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4<br>
<strong>&nbsp;Size:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 12236 bytes</strong><br>
&nbsp;# Aces:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 210<br>
&nbsp;Ace[0]<br>
&nbsp;&nbsp;Ace Type:&nbsp; 0x5 - ACCESS_ALLOWED_OBJECT_ACE_TYPE<br>
&nbsp;&nbsp;Ace Size:&nbsp; 56 bytes</p>
</div>
</div>
</div>
</div>

<p><span><span><span>The size entry shown here&nbsp;reveals the size of the security descriptor.</span></span></span></p>
<p><span><span><span>For more information about security descriptors, visit the following Microsoft website:</span></span></span></p>

<p><span><span><span><a data-content-id="" data-content-type="" href="http://technet.microsoft.com/en-us/library/cc781716(WS.10).aspx" target="">How Security Descriptors and Access Control Lists Work</a></span></span></span></p>
<p><a href="https://vstf-us-wa-28.partners.extranet.microsoft.com:8443/tfs/ContentIdea/ContentIdea/_workitems/edit/67039?fullScreen=false">Content Idea Request 67039</a></p>

<p>Writer: delhan<br>
Editor: v-jeffbo</p>
