<header><h1>Description of the Automatic Reconnection Feature in Windows Server 2003 and Windows XP SP1</h1></header><div class='kb-notice-section section'><span><span class='text-base'>IMPORTANT</span>: This article contains information about modifying the registry. Before you modify the registry, make sure to back it up and make sure that you understand how to restore the registry if a problem occurs. For information about how to back up, restore, and edit the registry, click the following article number to view the article in the Microsoft Knowledge Base: <div class='indent'><a id='kb-link-1' href='/EN-US/help/256986'>256986 </a> Description of the Microsoft Windows Registry<br></div></span></div><div class='kb-summary-section section'> This article describes the Automatic Reconnection feature for terminal services in Windows .Server 2003. </div><div class='kb-moreinformation-section section'><span><span class='text-base'>WARNING</span>: If you use Registry Editor incorrectly, you may cause serious problems that may require you to reinstall your operating system. Microsoft cannot guarantee that you can solve problems that result from using Registry Editor incorrectly. Use Registry Editor at your own risk.<br></span><br> Windows Server 2003 includes the Automatic Reconnection feature for terminal services. You can use this feature to automatically reconnect to the same session without re-typing logon credentials if the session is disconnected because of dropped packets on the network or a network error. By default, a maximum of twenty reconnection attempts are made at five-second intervals. You can turn on the Automatic Reconnection feature in Windows Server 2003 either in the Remote Desktop Connection tool or through a group policy.<br><br> By default, the Automatic Reconnection feature is turned on in Windows XP Service Pack 1 (SP1). You can turn the Automatic Reconnection feature off by editing the registry.<br><br> When a client loses network connectivity, Automatic Reconnection informs you that it is trying to reconnect to the broken session. The session appears in grayscale, and you receive the following reconnecting message: <div class='sbody-error'> The connection has been lost. Attempting to reconnect you to your session.<br> </div> Automatic Reconnection then counts down the remaining reconnection attempts, starting at 20. After your connection is re-established, the Reconnecting window disappears, and the session returns to an active state. If your connection is not re-established, the session closes.<br><br> In Windows XP SP1, the following behaviors indicate a loss of network connectivity: <br> <ul class='sbody-free_list'><li>Your session appears in a grayscale.</li><li>You receive a small blinking square icon with a computer network connection marked with a red X.</li></ul> Although you do not see any countdown, you still have 20 reconnection attempts. After your connection is re-established, the session returns to an active state. If your connection is not re-established, the session closes. <h3 class='sbody-h3'>How to Turn on Automatic Reconnection in Windows Server 2003</h3><ol class='sbody-num_list'><li>Start the Remote Desktop Connection tool (Mstsc.exe).</li><li>Click the <strong class='uiterm'>Experience</strong> tab.</li><li>Make sure that the for <strong class='uiterm'>Reconnect if Connection is Dropped</strong> option is selected.</li><li>Set any other options you want to use, and then click<br><strong class='uiterm'>Connect</strong> to start the session.</li></ol><h3 class='sbody-h3'>How to Turn on Automatic Reconnection by Using a Group Policy</h3><ol class='sbody-num_list'><li>Start the Microsoft Management Console (MMC), and then add the Group Policy snap-in.</li><li>Click <strong class='uiterm'>Local Computer Policy</strong>, click<br><strong class='uiterm'>Computer Configuration</strong>, and then click <strong class='uiterm'>Administrative Templates</strong>.</li><li>Open <strong class='uiterm'>Windows Components</strong>, open<br><strong class='uiterm'>Terminal Services</strong>, double-click the <strong class='uiterm'>Automatic Reconnection</strong> object in the right pane, and then click either<br><strong class='uiterm'>Enable</strong>, <strong class='uiterm'>Disable</strong>, or <strong class='uiterm'>Not Configure</strong>.</li><li>If the status is set to <span class='text-base'>Enable</span>, Automatic Reconnection is attempted for all clients that are running Remote Desktop Connection whenever their network connection is lost. If the status is set to <span class='text-base'>Disable</span>, Automatic Reconnection of clients is turned off. If the status is set to <span class='text-base'>Not Configured</span>, Automatic Reconnection is not specified at the group policy level. By default, Automatic Reconnection is turned on in the operating system.</li></ol><h3 class='sbody-h3'>How to Configure Automatic Reconnection in Windows XP SP1</h3><ol class='sbody-num_list'><li>By default, Automatic Reconnection is turned on in Windows XP SP1.</li><li>Start Registry Editor, and then locate the following registry key:<div class='indent'><strong class='sbody-strong'>HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services</strong></div></li><li>Add a new DWORD value that is named<br><span class='sbody-userinput'>fDisableAutoReconnect</span> to this registry key.</li><li>Set the <span class='sbody-userinput'>fDisableAutoReconnect</span> value data to either <span class='text-base'>1</span> or <span class='text-base'>0</span>. A value of <span class='text-base'>1</span> means that Automatic Reconnection is turned off. A value of <span class='text-base'>0</span> means that Automatic Reconnection is turned on.</li></ol><h3 class='sbody-h3'>How to Configure Automatic Reconnection in the Default.rdp File</h3> The background file that contains the configuration settings for the Remote Desktop setting is the Default.rdp file in the My Documents folder. You can configure this file to allow or disallow automatic reconnection: <br> <ol class='sbody-num_list'><li>Start Notepad, and then open Default.rdp.</li><li>Add the following option to the list, where 1 is enable (0 is disable): <div class='indent'><span class='sbody-userinput'>autoreconnection enabled:i:1</span></div><span class='text-base'>Note</span> You can modify the default number of reconnection attempts by adding the following value: <div class='indent'><span class='sbody-userinput'>AutoReconnect Max Retries:i:<strong class='sbody-strong'>number</strong></span></div></li></ol> The Windows Server 2003 version of the Remote Desktop client has an <span class='text-base'>automatic reconnection</span> checkbox that you can clear, so this option may already exist in the file. However, the Windows XP version does not include this checkbox, so you must edit the file if you want to include it. </div><div class='kb-securedata-section section'>grayscaling grayscaled greyscaling greyscaled</div><div class='kb-textlegacy-section section'>WinSERaid2:602360 Author: MICHELLM (2002-05-17T15:47:00) Edit Reviewer: cgolden (2002-06-18T13:42:00) Tech Reviewer: JAMIRC (2002-06-18T11:56:00) </div>