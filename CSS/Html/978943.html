<header><h1>Windows Server 2008 R2-based NLB nodes remain in a converging state indefinitely</h1></header><div class='kb-references-section section'><div internal-content-body=""><div class="internal-content"><div class="bold internal-content-body-title spacer-12-bottom">Microsoft Internal Support Information</div><div class="row"><div class="col-xs-24 internal-content-body-content"><p>BUG #: <a href='http://bugcheck/bugs/ContentMaintenance/125972.asp' title='Link only available for Microsoft corporate network users' target='_blank'>125972 (Content Maintenance)</a></p></div></div></div></div><div internal-content-body=""><div class="internal-content"><div class="bold internal-content-body-title spacer-12-bottom">Microsoft Internal Support Information</div><div class="row"><div class="col-xs-24 internal-content-body-content"><p>BUG #: <a href='http://bugcheck/bugs/WindowsSE/294209.asp' title='Link only available for Microsoft corporate network users' target='_blank'>294209 (Windows SE)</a></p></div></div></div></div></div><div class='kb-symptoms-section section'>Consider the following scenario:<br><ul class='sbody-free_list'><li>You configure a Network Load Balancing (NLB) cluster by using some computers that are running Windows Server 2008 R2.<br></li><li>A cluster membership change starts the convergence process. For  example, assume that a node is added or that a cluster is partitioned, and then the convergence process starts.</li></ul>In this scenario, some NLB nodes remain in the converging state and cannot accept connections. Additionally, the following event log is added to the System log:<br><span class='text-base'>Note</span> When this issue occurs, the <strong class='uiterm'>Network Load Balancing Manager</strong> window or another monitoring tool reports that the state of the problematic node is in  the converging state.<br></div><div class='kb-cause-section section'>This issue occurs because both of the NLB nodes incorrectly enter into an infinitely converging state.</div><div><h3 class='sbody-h3'>Hotfix information</h3><span> A supported hotfix is available from Microsoft. However, this hotfix is intended to correct only the problem that is described in this article. Apply this hotfix only to systems that are experiencing the problem described in this article. This hotfix might receive additional testing. Therefore, if you are not severely affected by this problem, we recommend that you wait for the next software update that contains this hotfix.<br><br>If the hotfix is available for download, there is a &quot;Hotfix download available&quot; section at the top of this Knowledge Base article. If this section does not appear, contact Microsoft Customer Service and Support to obtain the hotfix. <br><br><span class='text-base'>Note</span> If additional issues occur or if any troubleshooting is required, you might have to create a separate service request. The usual support costs will apply to additional support questions and issues that do not qualify for this specific hotfix. For a complete list of Microsoft Customer Service and Support telephone numbers or to create a separate service request, visit the following Microsoft Web site: <div class='indent'><a id='kb-link-1' href='/contactus/?ws=support' target='_self'>http://support.microsoft.com/contactus/?ws=support</a></div><span class='text-base'>Note</span> The &quot;Hotfix download available&quot; form displays the languages for which the hotfix is available. If you do not see your language, it is because a hotfix is not available for that language.</span><h4 class='sbody-h4'>Prerequisites</h4>To apply this hotfix, your computer must be running Windows Server 2008 R2. Additionally, the Network Load Balancing (NLB) feature must be installed.<h4 class='sbody-h4'>Restart requirement</h4><span>You do not have to restart the computer after you apply this hotfix.</span><br><br>Restart the Windows load balancing service (WLBS) that hosts the Nlb.sys module by running the following sequence of commands:<ol class='sbody-num_list'><li><div class='indent'><span class='text-base'>net stop wlbs</span></div></li><li><div class='indent'><span class='text-base'>net start wlbs</span></div></li></ol>If you uninstall this hotfix, restart the computer or restart the service.<h4 class='sbody-h4'>Hotfix replacement information</h4><span>This hotfix does not replace a previously released hotfix.</span><h4 class='sbody-h4'>File information</h4>The English (United States) version of this hotfix installs files that have the attributes that are listed in the following tables. The dates and the times for these files are listed in Coordinated Universal Time (UTC). The dates and the times for these files on your local computer are displayed in your local time together with your current daylight saving time (DST) bias. Additionally, the dates and the times may change when you perform certain operations on the files.<h5 class='sbody-h5 text-subtitle'>Windows Server 2008 R2 file information notes<br></h5><ul class='sbody-free_list'><li>The MANIFEST files (.manifest) and the MUM files (.mum) that are installed for each environment are <a managed-link="" href='#manifests1' target="" bookmark-id='manifests1'>listed separately</a> in the &quot;Additional file information for Windows Server 2008 R2&quot; section. MUM and MANIFEST files, and the associated security catalog (.cat) files, are extremely important to maintaining the state of the updated component. The security catalog files, for which the attributes are not listed, are signed with a Microsoft digital signature.</li></ul><h5 class='sbody-h5 text-subtitle'>For all supported x64-based versions of Windows Server 2008 R2</h5><br><div class='table-responsive'><table class='sbody-table table'><tr class='sbody-tr'><th class='sbody-th'>File name</th><th class='sbody-th'>File version</th><th class='sbody-th'>File size</th><th class='sbody-th'>Date</th><th class='sbody-th'>Time</th><th class='sbody-th'>Platform</th></tr><tr class='sbody-tr'><td class='sbody-td'>Nlb.sys</td><td class='sbody-td'>6.1.7600.20608</td><td class='sbody-td'>339,968</td><td class='sbody-td'>04-Jan-2010</td><td class='sbody-td'>04:48</td><td class='sbody-td'>x64</td></tr></table></div><h5 class='sbody-h5 text-subtitle'>For all supported IA-64-based versions of Windows Server 2008 R2</h5><br><div class='table-responsive'><table class='sbody-table table'><tr class='sbody-tr'><th class='sbody-th'>File name</th><th class='sbody-th'>File version</th><th class='sbody-th'>File size</th><th class='sbody-th'>Date</th><th class='sbody-th'>Time</th><th class='sbody-th'>Platform</th></tr><tr class='sbody-tr'><td class='sbody-td'>Nlb.sys</td><td class='sbody-td'>6.1.7600.20608</td><td class='sbody-td'>777,728</td><td class='sbody-td'>04-Jan-2010</td><td class='sbody-td'>03:59</td><td class='sbody-td'>IA-64</td></tr></table></div><span></span></div><div class='kb-securedata-section section'>If this hotfix is not posted for public download (meaning a public URL for this hotfix is not provided in this article), distribution requires technical lead, escalation team member, or manager approval and the following information applies:<br><br><ul class='sbody-free_list'><li>To receive the hotfix, customers must be experiencing the bug that is mentioned in the &quot;Symptoms&quot; section.</li><li> You must track the customers you send this to and supply them with the next service pack when it becomes available (if a service pack is released).</li></ul>This hotfix is scheduled to be included with Windows Server 2008 R2 Service Pack 1.<br><br></div><div class='kb-securedata-section section'>The &quot;Resolution&quot; section states whether this hotfix is available as a hotfix or in the latest service pack. For comparison and testing, the original hotfix is available on the <a id='kb-link-3' href='http://hotfix' target='_self'>http://hotfix</a> Web site.<br></div><div class='kb-resolution-section section'><span></span></div><div class='kb-workaround-section section'>To work around this issue, restart the problematic NLB nodes.</div><div class='kb-status-section section'><span>Microsoft has confirmed that this is a problem in the Microsoft products that are listed in the &quot;Applies to&quot; section.</span></div><div class='kb-moreinformation-section section'>The following event is logged after you install this hotfix  if the NLB diagnostic log is enabled:<span class='text-base'>Note</span> By default, the NLB diagnostic log is disabled. <br><br>For more information about how to enable the NLB diagnostic log, visit the following Microsoft Web sites:<div class='indent'><a id='kb-link-4' href='http://blogs.msdn.com/clustering/archive/2010/01/07/9944946.aspx' target='_self'>How to enable NLB diagnostic log</a></div><div class='indent'><a id='kb-link-5' href='http://technet.microsoft.com/en-us/library/cc725691.aspx' target='_self'>General information about the Network Load Balancing feature in Windows Server 2008 R2</a></div><br><span>For more information about software update terminology, click the following article number to view the article in the Microsoft Knowledge Base:<br><br><div class='indent'><a id='kb-link-6' href='/en-us/help/824684'>824684 </a> Description of the standard terminology that is used to describe Microsoft software updates<br><br></div></span><h3 class='sbody-h3'>Additional file information</h3><a class='bookmark' id='manifests1'></a><h4 class='sbody-h4'>Additional file information for Windows Server 2008 R2</h4><h5 class='sbody-h5 text-subtitle'>Additional files for all supported x64-based versions of Windows Server 2008 R2</h5><div class='table-responsive'><table class='sbody-table table'><tr class='sbody-tr'><th class='sbody-th'>File name</th><th class='sbody-th'>File version</th><th class='sbody-th'>File size</th><th class='sbody-th'>Date</th><th class='sbody-th'>Time</th><th class='sbody-th'>Platform</th></tr><tr class='sbody-tr'><td class='sbody-td'>Amd64_eb981379c5c254f91a9efb950a3a8b77_31bf3856ad364e35_6.1.7600.20608_none_8d618bb9597d98c7.manifest</td><td class='sbody-td'>Not Applicable</td><td class='sbody-td'>726</td><td class='sbody-td'>04-Jan-2010</td><td class='sbody-td'>22:35</td><td class='sbody-td'>Not Applicable</td></tr><tr class='sbody-tr'><td class='sbody-td'>Amd64_microsoft-windows-n..ncing-networkdriver_31bf3856ad364e35_6.1.7600.20608_none_0ae20a564af504dc.manifest</td><td class='sbody-td'>Not Applicable</td><td class='sbody-td'>2,669</td><td class='sbody-td'>04-Jan-2010</td><td class='sbody-td'>12:30</td><td class='sbody-td'>Not Applicable</td></tr><tr class='sbody-tr'><td class='sbody-td'>Update.mum</td><td class='sbody-td'>Not Applicable</td><td class='sbody-td'>1,689</td><td class='sbody-td'>04-Jan-2010</td><td class='sbody-td'>22:35</td><td class='sbody-td'>Not Applicable</td></tr></table></div><h5 class='sbody-h5 text-subtitle'>Additional files for all supported IA-64-based versions of Windows Server 2008 R2</h5><div class='table-responsive'><table class='sbody-table table'><tr class='sbody-tr'><th class='sbody-th'>File name</th><th class='sbody-th'>File version</th><th class='sbody-th'>File size</th><th class='sbody-th'>Date</th><th class='sbody-th'>Time</th><th class='sbody-th'>Platform</th></tr><tr class='sbody-tr'><td class='sbody-td'>Ia64_306de8881bc6dd8fb12138a66c1a0253_31bf3856ad364e35_6.1.7600.20608_none_b7f30ee8c19f760e.manifest</td><td class='sbody-td'>Not Applicable</td><td class='sbody-td'>724</td><td class='sbody-td'>04-Jan-2010</td><td class='sbody-td'>22:35</td><td class='sbody-td'>Not Applicable</td></tr><tr class='sbody-tr'><td class='sbody-td'>Ia64_microsoft-windows-n..ncing-networkdriver_31bf3856ad364e35_6.1.7600.20608_none_aec512c892959ca2.manifest</td><td class='sbody-td'>Not Applicable</td><td class='sbody-td'>2,667</td><td class='sbody-td'>04-Jan-2010</td><td class='sbody-td'>07:57</td><td class='sbody-td'>Not Applicable</td></tr><tr class='sbody-tr'><td class='sbody-td'>Update.mum</td><td class='sbody-td'>Not Applicable</td><td class='sbody-td'>1,461</td><td class='sbody-td'>04-Jan-2010</td><td class='sbody-td'>22:35</td><td class='sbody-td'>Not Applicable</td></tr></table></div></div><div class='kb-securedata-section section'>failover NLB UAG</div><div class='kb-securedata-section section'><span><div class='kb-securedata-section section'><span class='text-base'>Author: bbern;stevenxu<br>Writer: v-stxu<br>Tech Reviewer: bbern;symonp;daviddio;stevenxu;v-yuluo<br>Editor: v-lynan</span></div></span></div>