<header><h1>ASMS – Simple Data Migration</h1></header><p><span lang="EN">Submit a </span><a href="http://sharepoint/sites/fastrack/Lists/ModTrack/NewForm.aspx?RootFolder="><span lang="EN"><span><span>ModTrack</span></span></span></a><span lang="EN"> request to update this TSG.</span></p>

<h3><a id="Overview" name="Overview"></a>Overview</h3>

<p>This TSG provides guidance on how to migrate customers&#39;&nbsp;services and deployments from one subscription to another when it is not applicable to perform a Transfer of Ownership (<a href="https://internal.support.services.microsoft.com/en-us/help/3040383" target="_blank">TSG 3040383</a>) or a Conversion via CMAT (<a href="https://internal.support.services.microsoft.com/en-us/help/2647585" target="_blank">TSG 2647585</a>).</p>

<h3><a id="Policy" name="Policy"></a>Policy</h3>

<p>Before assisting a customer with a simple data migration, perform two sets of pre-requisite checks:</p>

<ol>
	<li>
	<p>Checks related to Azure Policy.</p>
	</li>
	<li>
	<p><span><span>Checks specific to the customer&rsquo;s services.</span></span></p>
	</li>
</ol>

<div>
<h4><span><span><a id="ChecksRelatedToAzurePolicy" name="ChecksRelatedToAzurePolicy"></a>Checks Related to Azure Policy</span></span></h4>

<p>The following Azure Policy checks should be carried out before a simple data migration is performed:</p>

<ol>
	<li>
	<p><span><strong><span>ASMS cannot perform migrations of only <em>some</em> services within a subscription (also known as &ldquo;Selective Service Migration&rdquo;). </span></strong><span><span>ASMS can only perform migrations of <em>all</em> services within a subscription, or none. It is important to determine as soon as possible whether the customer is asking for selective migration. </span></span></span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span><span><span>If a customer needs assistance migrating a single service, transfer the case to the <span>POD IaaS team</span></span></span><span> </span><span><span> as appropriate. Before transferring, the following requirements must be met:</span></span></span></p>

		<ul style="list-style-type:circle">
			<li>
			<p><span><span><span>The source and destination subscriptions are under the same tenant/directory.</span></span></span></p>
			</li>
			<li>
			<p><span>The source and destination subscriptions have a common user/owner who can perform the data migration via the customer portal. </span></p>
			</li>
			<li>
			<p><span>The source subscription does not have any Classic resources.</span></p>
			</li>
		</ul>
		</li>
		<li>
		<p><span>If the source and destination directories are different, help the customer align the directories by following the instructions in the link below.</span></p>

		<ul style="list-style-type:circle">
			<li>
			<p><span><span><a href="https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-how-subscriptions-associated-directory" target="_blank">Associate or add an Azure Subscription to your Azure Active Directory tenant</a></span></span><span><span> </span></span></p>
			</li>
		</ul>
		</li>
	</ul>
	</li>
	<li>
	<p><span><strong><span>Subscription Ownership Transfer (SOT)</span></strong>: Confirm whether a SOT or offer conversion would meet the customer&rsquo;s needs. If so, do not perform a data migration and instead follow the guidance in one of the following TSGs:</span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span><span><a data-content-id="" data-content-type="" href="https://internal.support.services.microsoft.com/en-us/help/3040383" managed-link="" target="_blank">TSG 3040383</a></span></span></p>
		</li>
		<li>
		<p><span><a data-content-id="" data-content-type="" href="https://internal.support.services.microsoft.com/en-us/help/2647585" managed-link="" target="_blank">TSG 2647585</a></span></p>
		</li>
	</ul>
	</li>
	<li>
	<p><span><strong><span>Active Services</span></strong>: If the customer&rsquo;s <strong>﻿</strong>scenario requires migration to a&nbsp;subscription with active services&nbsp;or Azure Container Service (ACS), refer to the forced migration process. See <a href="https://internal.support.services.microsoft.com/en-us/help/2892044" target="_blank">TSG 2892044</a> for details.</span></p>
	</li>
	<li>
	<p><span><span><strong><span>Check whether the customer has </span></strong><strong>Azure Resource Manager<strong><span> (ARM) services running</span></strong></strong></span><strong><span>. Note that ASMS is unable to move these services.</span></strong> ARM services are the Resource Group deployments located in the Azure portal. During a data migration, ARM services do not move <span>by default</span>. If services such as Compute, Network, and Storage exist in the source subscription, support cannot proceed with the data migration. However, there are other ARM services which are migratable via customer self-serve, which you should encourage the customer to use. See the public facing page&nbsp;<span><span><em><a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/" target="_blank">Move resources to a new resource group or subscription</a></em>&nbsp;for additional guidance.</span></span>&nbsp;It is the SE&rsquo;s responsibility to ensure the customer is educated about the services support can move versus services the customer must move. Use the steps below to check for ARM services via <span>Jarvis</span>:</span></p>

	<ol style="list-style-type:lower-alpha">
		<li>
		<p>Navigate to <strong>Azure Resource Manager &gt; Resource Group Management &gt; Get resources from subscription</strong>.</p>
		</li>
		<li>
		<p>For <em>Subscription</em>, enter the subscription GUID.</p>
		</li>
		<li>
		<p>Leave the&nbsp;<em>Query String (optional)</em> blank.</p>
		</li>
		<li>
		<p>Select <strong>execute </strong>and then search the output for:</p>

		<ul style="list-style-type:circle">
			<li>
			<p>Microsoft.Network</p>
			</li>
			<li>
			<p>Microsoft.Compute</p>
			</li>
			<li>
			<p>Microsoft.Storage<br>
			<strong>Note:</strong> If any of the above strings is present in the output, <strong>do not</strong> execute the migration.</p>
			</li>
		</ul>
		</li>
	</ol>
	</li>
</ol>

<ol start="5">
	<li>
	<p><span> <strong><span>Data Migrations to Free Trials are not allowed. </span></strong>This is a safety measure to prevent customers from requesting service migrations from Free Trial to Free Trial to avoid paying for services.</span></p>
	</li>
</ol>

<ol start="6">
	<li>
	<p><span><strong><span>Payments must be up to date on the source subscription prior to executing any migrations.</span></strong> This ensures that customers pay all outstanding balances on the source account.</span></p>
	</li>
	<li>
	<p><span><strong><span>All types of data migrations require a peer review prior to execution. </span></strong>When performing a simple data migration in Jarvis, be sure to follow these principles:</span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span>Any ASMS engineer (another SE or a TA) can be the reviewer. There is no need to send a task to a queue; just ask whoever is available at that moment.</span></p>
		</li>
		<li>
		<p><span>The approver and the reviewer must be different people.</span></p>
		</li>
		<li>
		<p><span>The approver and the reviewer must both be looking at the same monitor together while executing the review.</span></p>
		</li>
		<li>
		<p><span>The reviewer must add a case log entry to the case saying that they approved the migration.</span></p>
		</li>
	</ul>
	</li>
	<li>
	<p><strong><span><span>For additional information on approved policies or process exceptions, consult with the on-shift TA. </span></span></strong></p>
	</li>
	<li>
	<p><span><strong>Communicate to the customer any findings from the pre-requisite checks that might hinder support from executing the migration.</strong> After you have confirmed that a data migration can be performed, contact the customer and notify them of the following: </span></p>

	<ol style="list-style-type:lower-alpha">
		<li>
		<p><span> We have determined that we will be performing a Data Migration to transfer their services from the specified source subscription to the destination subscription.</span></p>
		</li>
		<li>
		<p><span> This process will require several steps and will take some time to complete depending on the details of the customer&rsquo;s deployment.</span></p>
		</li>
		<li>
		<p><span><span> Ask the customer to review the data transfer pre-requisites below and let us know if they have questions.</span><span> </span></span></p>

		<ul style="list-style-type:disc">
			<li>
			<p><span>We do not support selective service transfers, nor transfers of only a selected hosted service or storage service from one subscription to another. Either all services can be transferred, or none. </span></p>
			</li>
			<li>
			<p><span>The source as well as the destination subscriptions must be Active. </span></p>
			</li>
			<li>
			<p><span>The destination subscription must be completely empty. (The Forced Migration process allows migration to a subscription with services running, but it requires more time.) </span></p>
			</li>
			<li>
			<p><span>The source and destination subscriptions must have the same Service Administrator until the migration is complete. </span></p>
			</li>
			<li>
			<p><span>The source and destination subscriptions cannot contain deployments/affinity groups with the same name. </span></p>
			</li>
			<li>
			<p><span>The customer should provide a screenshot of the &ldquo;All Resources/Services&rdquo; view on <a href="portal.azure.com">portal.azure.com</a> if they have deployed services via ARM. If there are no services deployed via ARM, they should provide a screenshot of the &ldquo;All Items&rdquo; view from <a href="portal.azure.com">portal.azure.com</a> for both the Source and the Destination Subscriptions. </span></p>
			</li>
			<li>
			<p><span>There are some Azure services which are self-serve migration only, meaning the customer must perform the migration from their side within the Azure portal. Additionally, there are other Azure services which cannot be moved between subscriptions at all and must be manually re-created in the destination subscription by the customer.</span></p>

			<ul style="list-style-type:circle">
				<li>
				<p><span>A list of services that can and cannot be moved via self-serve can be found at: <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-move-resources">https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-move-resources</a>.</span></p>
				</li>
			</ul>
			</li>
		</ul>
		</li>
	</ol>
	</li>
</ol>

<p class="indent-1">Notify the customer that, while they are validating their pre-requisites, we will start the validation process on the details of their migration request. Ask the customer to contact us as soon as they are ready to begin the migration process, at which point we will advise them about timelines and any technical details that are required for completion.</p>

<h4><a id="ChecksSpecificToTheCustomersServices" name="ChecksSpecificToTheCustomersServices"></a>Checks Specific to the Customer&#39;s Services</h4>

<p><span><span>Using the steps below, run a prerequisite check to prepare for the migration (<span>leverage checklist template below</span></span></span><span><span> </span></span><span><span>). Be sure to take detailed notes at each step, as you may need to reference the validations when engaging a TA, ASE, or CXP. Note the following:</span></span></p>

<ul>
	<li>
	<p><span><span>CXP should only be engaged after consulting with a TA/PTA. </span></span></p>
	</li>
	<li>
	<p><span><span>Never skip to a Forced Migration (</span></span><span><span><a href="https://internal.support.services.microsoft.com/en-us/help/2892044" target="_blank"><span>TSG 2892044</span></a></span></span><span><span>) until all the below steps are completed with proper accompanying research notes.</span></span></p>
	</li>
</ul>

<div>
<div>
<ol>
	<li>
	<p><span><strong><span><span>Obtain the source and destination subscription GUIDs if they are not available in the case.</span></span></strong></span></p>

	<ol style="list-style-type:lower-alpha">
		<li>
		<p><span><span>List the source ID.</span></span></p>
		</li>
		<li>
		<p><span><span>List the destination ID.</span></span></p>

		<ul style="list-style-type:disc">
			<li>
			<p><span><span>If a destination subscription is not provided, ask the customer to provide the proper account details. </span></span></p>
			</li>
			<li>
			<p><span><span>If the customer does not have an existing destination subscription, have them create a new subscription. </span></span></p>

			<ul style="list-style-type:circle">
				<li>
				<p><span><span>If the customer is an EA customer, they must create the new subscription in the EA portal.</span></span><br>
				<strong><span>Note:</span></strong><span> Creation of a new subscription is not to be confused with creation of a new EA enrollment.</span></p>
				</li>
			</ul>
			</li>
		</ul>
		</li>
	</ol>
	</li>
</ol>
</div>
</div>

<div>
<ol start="2">
	<li>
	<p><span><strong><span><span> Check the offer types to ensure that there are no restrictions for the migration.</span></span></strong></span></p>

	<ol style="list-style-type:lower-alpha">
		<li>
		<p><span><span>Source offer type</span></span></p>
		</li>
		<li>
		<p><span><span>Destination offer type</span></span></p>

		<ul style="list-style-type:disc">
			<li>
			<p><span><span><span>Data Migration to Free Trial is not allowed. This is a safety measure to prevent customers from requesting service migrations from Free Trial to Free Trial to avoid paying for services. </span></span><span> </span></span></p>
			</li>
			<li>
			<p><span><span><span>CSP: Some migrations are supported. For additional guidance, see </span><a href="https://internal.support.services.microsoft.com/en-us/help/3078989" target="_blank"><span>TSG 3078989</span></a><span>.</span></span></span></p>

			<ul style="list-style-type:circle">
				<li>
				<p><span><span>Public-facing customer guidance can be found at: <a href="https://docs.microsoft.com/en-us/azure/cost-management-billing/manage/transfer-subscriptions-subscribers-csp">Transfer Azure subscriptions between subscribers and CSPs</a>.</span></span></p>
				</li>
			</ul>
			</li>
			<li>
			<p><span><span>AIRS: Leverage </span><a href="https://internal.support.services.microsoft.com/en-us/help/2651524" target="_blank"><span>TSG 2651524</span></a><span> for more details about this offer type.</span></span></p>
			</li>
			<li>
			<p><span><span>If the destination subscription has MPN/MSDN/BizSpark offer type monetary credits, advise the customer that they may need to remove the monetary cap if the service use is high.</span></span></p>
			</li>
			<li>
			<p><span><span>Migrations are not available for preview accounts or subscriptions.</span></span></p>
			</li>
			<li>
			<p><span><span>Migrations are not available from Azure Commercial to Azure Government (Fairfax) and vice versa.</span></span></p>
			</li>
		</ul>
		</li>
	</ol>
	</li>
</ol>

<ol start="3">
	<li>
	<p><span><strong><span>Check that both subscriptions are Active.</span></strong></span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span>Use CMAT or CST to confirm that both subscriptions are active.</span></p>
		</li>
		<li>
		<p><span>Use the following steps in Jarvis to check for Active Status: </span></p>

		<ul style="list-style-type:circle">
			<li>
			<p><span>Navigate to <strong>AzureRT &gt; Subscription Management &gt; Get subscription with details</strong>.</span></p>
			</li>
			<li>
			<p><span>Look for &ldquo;SubscriptionStatus: Active.&rdquo;</span></p>
			</li>
		</ul>
		</li>
		<li>
		<p><span>If either subscription is not active, temporarily re-enable the subscription prior to executing the transfer. This may require engaging a TA/PTA for re-enablement assistance through Jarvis (JIT permissions required).</span></p>
		</li>
	</ul>
	</li>
</ol>

<ol start="4">
	<li>
	<p><span> <strong><span>Confirm that both the source and destination Account Admins (AAs) have approved the migration (if they are not the same person).</span></strong></span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span>If the AAs are different, ask the customer to get approval from both AAs and add them to the communication email. This is the customer&rsquo;s responsibility; support should never add the AAs to the thread.</span></p>
		</li>
		<li>
		<p><span>Ensure that you have obtained documented approval via email or phone (<a href="https://internal.support.services.microsoft.com/en-us/help/2646876" target="_blank">TSG 2646876</a>) from each account. </span></p>
		</li>
		<li>
		<p><span><span><span>Steps to add an account as an owner using the RBAC role can be found on this public-facing page:</span></span><strong><span><span> </span></span></strong><a data-content-id="" data-content-type="" href="https://docs.microsoft.com/en-us/azure/billing/billing-add-change-azure-subscription-administrator" managed-link="" target="_blank">https://docs.microsoft.com/en-us/azure/billing/billing-add-change-azure-subscription-administrator</a>.</span></p>
		</li>
	</ul>
	</li>
</ol>

<ol start="5">
	<li>
	<p><span> <strong><span>Check if the Service Admins are the same on both subscriptions.</span></strong> </span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span>Check the PUIDs to differentiate between the Live ID and Org ID. </span></p>
		</li>
		<li>
		<p><span>Use the following steps in Jarvis to check the Service Administrators: </span></p>

		<ul style="list-style-type:circle">
			<li>
			<p><span>Navigate to <strong>AzureRT &gt; Subscription Management &gt; Get subscription with details</strong> </span></p>
			</li>
			<li>
			<p><span>Look for &ldquo;ServiceAdminLiveID.&rdquo;</span></p>
			</li>
		</ul>
		</li>
		<li>
		<p><span>If necessary, add the Service Administrator of the source subscription as the Global Administrator of the destination directory <strong>and</strong> as an owner/Service Administrator of the destination subscription.</span></p>

		<ul style="list-style-type:circle">
			<li>
			<p><span><span><span>Steps to add a Global administrator to the Azure Active Directory can be found on this public-facing page:</span></span> <a href="https://docs.microsoft.com/en-us/azure/active-directory/active-directory-assign-admin-roles-azure-portal" target="_blank">https://docs.microsoft.com/en-us/azure/active-directory/active-directory-assign-admin-roles-azure-portal</a>.</span></p>
			</li>
			<li>
			<p><span><span>Steps to add an account as a Service Administrator can be found in <a data-content-id="" data-content-type="" href="https://internal.support.services.microsoft.com/en-us/help/3044837" managed-link="" target="_blank">TSG 3044837</a>.</span></span></p>
			</li>
		</ul>
		</li>
	</ul>
	</li>
</ol>

<ol start="6">
	<li>
	<p><span><strong><span>Check if the destination quota needs to be increased.</span></strong></span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span>Check the quotas of the source and destination subscriptions to verify that the quota of the destination subscription is <span>greater than or equal to </span><span> </span>that of the source subscription. This is to ensure there is enough quota for the migration to occur.</span></p>
		</li>
		<li>
		<p><span>Use the following steps in Jarvis to check the quota for the source and destination subscriptions: </span></p>

		<ol style="list-style-type:lower-alpha">
			<li>
			<p><span>Navigate to <strong>AzureRT &gt; Subscription Management &gt; Get subscription with details</strong>.</span></p>
			</li>
			<li>
			<p><span>Select Detail Level: <em>Full</em>.</span></p>
			</li>
			<li>
			<p><span>Check the following limits:</span></p>

			<ul style="list-style-type:circle">
				<li>
				<p><span>Max Storage Accnts</span></p>
				</li>
				<li>
				<p><span>Max Hosted services </span></p>
				</li>
				<li>
				<p><span>Max Compute Roles </span></p>
				</li>
			</ul>
			</li>
		</ol>
		</li>
		<li>
		<p><span>If the destination quota is less than the source, send a task to Capacity Management to secure the appropriate quota increases before proceeding with the migration (<a href="https://internal.support.services.microsoft.com/en-us/help/2834676" target="_blank">TSG 2834676</a>).<br>
		<br>
		<strong>Note:</strong> Failure to increase the quota prior to the migration will have a negative impact on the execution of the operation.</span></p>
		</li>
	</ul>
	</li>
</ol>

<ol start="7">
	<li>
	<p><span> <strong><span>Check the services running in the source subscription. </span></strong>This is to verify that we are not overlooking any services that cannot be migrated.</span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span>Ask the customer for screenshots of all services deployed on the source subscription.</span></p>
		</li>
		<li>
		<p><span>Use CMAT or CST to download the detailed usage, and verify the services currently running in the source and destination subscriptions. </span></p>

		<ul style="list-style-type:circle">
			<li>
			<p><span>Refer to <a href="https://internal.support.services.microsoft.com/en-us/help/2646733" target="_blank">TSG 2646733</a> for CMAT guidance.</span></p>
			</li>
			<li>
			<p><span><span>Refer to <a data-content-id="" data-content-type="" href="https://internal.support.services.microsoft.com/en-us/help/4487934" managed-link="" target="_blank">TSG 4487934</a> for CST guidance (see <em>Usage </em>section).</span></span></p>
			</li>
		</ul>
		</li>
	</ul>
	</li>
</ol>

<ol start="8">
	<li>
	<p><span><strong><span>Check if the destination subscription is empty. </span></strong></span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span>Download the usage details of the destination subscription from CMAT and check for any services deployed by the customer<strong><span>. </span></strong></span></p>
		</li>
		<li>
		<p><span>If the destination subscription is empty, a simple migration can be carried out. If it is not empty, <span>a forced migration may be necessary.</span><span> </span></span></p>

		<ul style="list-style-type:circle">
			<li>
			<p><span>For guidance on forced migrations, see <a href="https://internal.support.services.microsoft.com/en-us/help/2892044">TSG 2892044</a>.</span></p>
			</li>
		</ul>
		</li>
		<li>
		<p><span>Even if the destination subscription is empty, you may get a warning stating &ldquo;destination is not empty.&rdquo; In that case, have the customer do the following:</span></p>

		<ol style="list-style-type:lower-alpha">
			<li>
			<p><span>Log into the management portal and click <strong>Settings</strong>.</span></p>
			</li>
			<li>
			<p><span>Click <strong>management certificates</strong>. </span></p>
			</li>
			<li>
			<p><span>If the customer finds any certificates, they should delete the certificates and then try the migration again.</span></p>
			</li>
		</ol>
		</li>
	</ul>
	</li>
</ol>

<p class="indent-1"><strong>Note:</strong>&nbsp;As part of the migration process, you will revisit this step to compare your findings against the screenshots of the services running in the customer&rsquo;s portal (provided by the customer).</p>

<ol start="9">
	<li>
	<p><span> <strong><span>Check Jarvis to verify that the source and destination subscriptions do not contain deployments or affinity groups with the same name. </span></strong></span></p>

	<ol style="list-style-type:lower-alpha">
		<li>
		<p><span>In Jarvis, navigate to <strong>AzureRT &gt; Subscription Management &gt; Get subscription with details</strong>.</span></p>
		</li>
		<li>
		<p><span>Select Detail Level: <em>Full</em>.</span></p>
		</li>
	</ol>
	</li>
</ol>

<ol start="10">
	<li>
	<p><span> <strong><span>Check if there are mobile services or websites </span></strong><strong>in the source and destination subscriptions</strong>.</span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span>Use the following Jarvis operations to check for these services:</span></p>

		<ul style="list-style-type:circle">
			<li>
			<p><span><strong>AzureRT &gt; Service Management &gt; List Applications </strong></span></p>
			</li>
			<li>
			<p><span><strong>AzureRT &gt; Service Management &gt; List Cloud Services With Detail</strong></span></p>
			</li>
			<li>
			<p><span><strong>AzureRT &gt; Service Management &gt; List Disks</strong></span></p>
			</li>
			<li>
			<p><span><strong>AzureRT &gt; Service Management &gt; List OS Images </strong></span></p>
			</li>
		</ul>
		</li>
		<li>
		<p><span><span><span><span>If there are Mobile Services in the source or destination subscriptions or Websites in the destination subscription, special migration steps are required. See the table below.</span></span><br>
		<br>
		<strong>Note:</strong> Mobile Services migrations are processed asynchronously. When RDFE sends the migration event, it is queued for processing and returns a &ldquo;success&rdquo; response to RDFE. When the queue event is processed, it may fail to migrate successfully.</span></span></p>

		<table class="table">
			<tbody>
				<tr>
					<td>
					<p><strong><span>Scenario</span></strong></p>
					</td>
					<td>
					<p><strong><span>Can execute migration?</span></strong></p>
					</td>
				</tr>
				<tr>
					<td>
					<p>Mobile in source subscription only</p>
					</td>
					<td>
					<p><strong><span><span>Yes</span></span></strong></p>
					</td>
				</tr>
				<tr>
					<td>
					<p>Mobile in destination subscription only</p>
					</td>
					<td>
					<p><strong><span><span>Yes</span></span></strong></p>
					</td>
				</tr>
				<tr>
					<td>
					<p>Mobile in source and <strong><span><span>websites or mobile </span></span></strong>in destination subscription - same Datacenter</p>
					</td>
					<td>
					<p><strong><span><span>No &ndash; follow steps below</span></span></strong></p>
					</td>
				</tr>
				<tr>
					<td>
					<p>Mobile in source and <strong><span><span>websites or mobile</span></span></strong> in destination subscription - different Datacenters</p>
					</td>
					<td>
					<p><strong><span><span>No &ndash; follow steps below</span></span></strong></p>
					</td>
				</tr>
			</tbody>
		</table>

		<p><span><span> </span></span></p>
		</li>
	</ul>
	</li>
</ol>

<ul>
	<li class="indent-1">
	<p>If there are Mobile Services in the source and Website or Mobile Services in the destination, instruct the customer to self-migrate prior to ASMS executing a migration. Suggest the customer to do the following:</p>

	<ul>
		<li class="indent-1">Backup Mobile Services in the destination subscription.</li>
		<li class="indent-1">Delete Mobile Services in the destination subscription.</li>
		<li class="indent-1">CSM v1 RPs: Create a duplicate new RP resource in the destination subscription.</li>
	</ul>
	</li>
</ul>

<p class="indent-2"><span><span><strong>Note</strong>: Have the customer confirm their completion of these steps before executing a migration. </span></span><span><span> </span></span></p>

<ol start="11" style="list-style-type:decimal">
	<li>
	<p><strong>Check for 3<sup>rd</sup> party CSM Resource Providers (for example, 20 MB MySQL database provided by Clear DB) in the source and destination subscriptions. </strong><span>The customer will usually get their choice of either a free 20 MB Azure SQL Database or 20 MB MySQL database provided by Clear DB when creating a website. To check for these in Jarvis, do the following:</span></p>

	<ol style="list-style-type:lower-alpha">
		<li>
		<p><span>Navigate to <strong>AzureRT &gt; Resource Provider Management &gt; List Extension Services</strong>.</span></p>
		</li>
		<li>
		<p><span>Filter for the following text using Ctrl+F: &ldquo;ListEnabledServices.&rdquo;</span></p>
		</li>
	</ol>
	</li>
	<li>
	<p><span> <strong><span>Check to see if the CSM Resource Provider is a Legacy RP or a CSM v1 RP using Jarvis. </span></strong></span></p>

	<ol style="list-style-type:lower-alpha">
		<li>
		<p><span>Navigate to <strong>AzureRT &gt; Resource Provider Management &gt; Get Extension Service Information</strong>.</span></p>
		</li>
		<li>
		<p><span>Enter the Extension Service Name (resource provider name).</span></p>
		</li>
		<li>
		<p><span>Filter for the following text using Ctrl+F: &ldquo;GetActiveConfiguration.&rdquo; </span></p>
		</li>
	</ol>
	</li>
	<li>
	<p><span><strong><span>Verify whether the resource provider is listed and whether AzureCommunicationProtocolVersion is 1.0 or above.</span></strong></span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span>If the resource provider (RP) exists, then the RP is currently active in the RDFE PROD environment.</span></p>
		</li>
		<li>
		<p><span>If it is not above 1.0, it&#39;s a Legacy RP and will get moved during a Forced Migration.</span></p>
		</li>
		<li>
		<p><span><span>If </span><span>i</span>t is above 1.0, the RP is a CSMv1 RP. CSM v1 RPs will not get moved during Forced Migrations and will need to be moved separately as noted in the <span>Forced Migration TSG</span><span> </span>. </span></p>

		<ul style="list-style-type:circle">
			<li>
			<p><span><span>Complete your prerequisite work in this TSG before moving to the Forced Migration instructions. For guidance on forced migrations, see <a data-content-id="" data-content-type="" href="https://internal.support.services.microsoft.com/en-us/help/2892044" managed-link="" target="_blank">TSG 2892044</a>.</span></span></p>
			</li>
		</ul>
		</li>
	</ul>
	</li>
</ol>

<ol start="14">
	<li>
	<p><span><strong><span><a id="Step14" name="Step14"></a>If the customer has Media Services:</span></strong></span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span>Instruct the customer to stop all the Streaming Endpoints that are enabled for CDN in the source subscription. Wait for the customer to confirm that this is done before proceeding to the next step.</span></p>

		<ul style="list-style-type:circle">
			<li>
			<p><span>Also inform them that Media Services will stop for up to 90 minutes while the migration is happening.</span></p>
			</li>
		</ul>
		</li>
		<li>
		<p><span>Open an <a data-content-id="" data-content-type="" href="https://portal.microsofticm.com/imp/v3/incidents/create" managed-link="" target="_blank">IcM ticket</a> and assign it to <em>CDN Management Service.</em> Include the following information in the ticket:</span></p>

		<ul style="list-style-type:circle">
			<li>
			<p><span><strong><span>Title:</span></strong> Media Service Account </span></p>
			</li>
			<li>
			<p><span><strong><span>Migration</span></strong>: [Account Name]</span></p>
			</li>
			<li>
			<p><span><strong><span>Details</span></strong>:</span></p>

			<ol>
				<li>
				<p><span> Source Subscription</span></p>
				</li>
				<li>
				<p><span> Destination Subscription</span></p>
				</li>
				<li>
				<p><span> Media Service Account Name </span></p>
				</li>
			</ol>
			</li>
		</ul>
		</li>
		<li>
		<p><span>Wait for the IcM ticket to be resolved by the Azure CDN Team.</span></p>
		</li>
	</ul>
	</li>
	<li>
	<p><span><strong><span>Determine ownership and ability to migrate data for the customer&rsquo;s services.</span></strong></span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span><span><span>Leverage the below table to educate the customer on services that can and cannot be migrated by support. </span></span><strong><span><br>
		Note:</span></strong> <strong>Do</strong> <strong>not</strong> send this entire list to the customer. Remove any services from this list that your customer does not have.</span></p>
		</li>
		<li>
		<p><span>Customers can also move most resources using the self-service operations via the portal: <a data-content-id="" data-content-type="" href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-move-resources" managed-link="" target="_blank">https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-move-resources</a>. </span></p>

		<ul style="list-style-type:circle">
			<li>
			<p><span><span><span>Customers can move classic resources according to the <a data-content-id="" data-content-type="" href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-move-resources#classic-deployment-limitations" managed-link="" target="_blank">classic deployment limitations</a>.</span></span><br>
			&#8203;&#8203;&#8203;</span></p>

			<table class="table">
				<tbody>
					<tr>
						<td>
						<p><strong><span>Migration Owner</span></strong></p>
						</td>
						<td>
						<p><strong><span> Services</span></strong></p>
						</td>
						<td>
						<p><strong><span> Tool</span></strong></p>
						</td>
						<td>
						<p><strong><span> Notes</span></strong></p>
						</td>
					</tr>
					<tr>
						<td>
						<p>ASMS</p>
						</td>
						<td>
						<p>Access Control Service (ACS)</p>
						</td>
						<td>
						<p>Jarvis</p>
						</td>
						<td>
						<p>ACS gets handled separately in Jarvis via Forced Migration.</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>ASMS</p>
						</td>
						<td>
						<p>Cloud Services</p>
						</td>
						<td>
						<p>Jarvis</p>
						</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>
						<p>ASMS</p>
						</td>
						<td>
						<p>ExpressRoute</p>
						</td>
						<td>
						<p>Jarvis</p>
						</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>
						<p>ASMS</p>
						</td>
						<td>
						<p>Media Services</p>
						</td>
						<td>
						<p>Jarvis</p>
						</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>
						<p>ASMS</p>
						</td>
						<td>
						<p>Mobile Services</p>
						</td>
						<td>
						<p>Jarvis</p>
						</td>
						<td>
						<p>Forced migration could cause asynchronous transfer to fail and should be validated. Mobile services in both subscriptions can also result in shut-off due to violation of free mobile services limits. The mobile services team must be engaged via <a data-content-id="" data-content-type="" href="https://portal.microsofticm.com/imp/v3/incidents/create?os=20364&amp;tm=23189&amp;it=LiveSite" managed-link="" target="_blank">IcM</a>.</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>ASMS</p>
						</td>
						<td>
						<p>Multi-Factor Authentication</p>
						</td>
						<td>
						<p>Jarvis</p>
						</td>
						<td>
						<p>Both source and destination subscriptions must be in the same Active Directory.</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>ASMS</p>
						</td>
						<td>
						<p>Reserved IP Address + Reserved IPs under the list</p>
						</td>
						<td>
						<p>Jarvis</p>
						</td>
						<td>
						<p>Handled with other services during simple migration.</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>ASMS</p>
						</td>
						<td>
						<p>Storage</p>
						</td>
						<td>
						<p>Jarvis</p>
						</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>
						<p>ASMS</p>
						</td>
						<td>
						<p>Traffic Manager</p>
						</td>
						<td>
						<p>Jarvis</p>
						</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>
						<p>ASMS</p>
						</td>
						<td>
						<p>Virtual Machines</p>
						</td>
						<td>
						<p>Jarvis</p>
						</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>
						<p>ASMS</p>
						</td>
						<td>
						<p>Virtual Network</p>
						</td>
						<td>
						<p>Jarvis</p>
						</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>
						<p>ASMS</p>
						</td>
						<td>
						<p>Websites/ WebApps</p>
						</td>
						<td>
						<p>Jarvis</p>
						</td>
						<td>
						<p>All WebApps and Websites must be in the same resource group or the migration of the WebApps/websites will fail.</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Customer</p>
						</td>
						<td>
						<p>CDN</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>If the user has Media services using CDN, you will need to follow <a bookmark-id="Step14" href="#Step14" managed-link=""><em><span>Step 14</span></em></a> above. Otherwise, CDN is ARM and is customer-action only.</p>

						<p>File an <a data-content-id="" data-content-type="" href="https://portal.microsofticm.com/imp/NewIncident.aspx" managed-link="" target="_blank">ICM incident</a> to the CDN team.</p>

						<ul>
							<li><span>Title: <em>CRR: Microsoft Azure | &lt;&gt; | Service Desk case #</em></span></li>
							<li><span>Impacted service: <em>Azure CDN</em></span></li>
							<li><span>Assigned To: <em>Azure CDN</em></span></li>
							<li><span>Team: <em>Triage</em></span></li>
							<li><span>Sev: <em>4</em></span></li>
							<li><span>Incident Type: <em>Customer Reported</em></span></li>
							<li><span>Enviro: <em>PROD</em></span></li>
						</ul>
						</td>
					</tr>
					<tr>
						<td>
						<p>Customer</p>
						</td>
						<td>
						<p>Active Directory</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Customer Instructions: <a href="http://aka.ms/aaddev" target="_blank">http://aka.ms/aaddev</a></p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Customer</p>
						</td>
						<td>
						<p>Azure Automation</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Customer self-serve</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Customer</p>
						</td>
						<td>
						<p>MySQL (ClearDB)</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>When the customer changes subscriptions, they must follow this procedure:</p>

						<ol>
							<li>Download a backup of their existing DB. Backups are now downloadable from the <em>Backups &amp; Jobs</em> tab of the ClearDB dashboard.</li>
							<li>Delete the existing DB.</li>
							<li>Once their new subscription is active, create a new DB.</li>
							<li>Import the backup file using the MySQL command-line utility, the Migration Wizard in MySQL Workbench, or a similar DB admin tool.</li>
						</ol>
						</td>
					</tr>
					<tr>
						<td>
						<p>Customer/ASMS</p>
						</td>
						<td>
						<p>SQL DB</p>
						</td>
						<td>
						<p>Jarvis</p>
						</td>
						<td>
						<p>Done separately after the main migration is complete as customer self-serve. ASMS SE can perform SQL DB migration after the main migration has been completed. See <a data-content-id="" data-content-type="" href="https://internal.support.services.microsoft.com/en-us/help/2782736" managed-link="" target="_blank">TSG 2782736</a> for guidance.</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>App Services Certificates</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>App Service Certificate, Key Vault and Imported Certificates need to be in the same subscription.</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>Azure Marketplace purchases (including 3rd party VMs)</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Customer needs to cancel purchases and then repurchase from the new subscription.</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>Azure Store</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Customer cancels in source subscription and purchases again in the destination subscription.</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Customer</p>
						</td>
						<td>
						<p>Backup</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Customer can follow steps <a href="https://docs.microsoft.com/en-us/azure/backup/backup-azure-move-recovery-services-vault" target="_blank">here</a>.</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>BizTalk Services</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Out of Scope</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>Cache</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Out of Scope</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>HD Insight</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Out of Scope</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>Hyper-V Recovery Manager</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Out of Scope</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>Import / Export</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>Management Services</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Out of Scope</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>Scheduler</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Out of Scope</p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>Mobile Engagement</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Out of Scope. For details, see: <span><span><a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/" target="_blank" title="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/">https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/</a>.</span></span></p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>SQL servers</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Out of Scope. For details, see: <span><span><a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/" target="_blank" title="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/">https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/</a>.</span></span></p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>Search services</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Out of Scope. For details, see: <span><span><a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/" target="_blank" title="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/">https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/</a>.</span></span></p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>Redis caches</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Out of Scope. For details, see: <span><span><a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/" target="_blank" title="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/">https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/</a>.</span></span></p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>Notification Hubs</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Out of Scope. For details, see: <span><span><a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/" target="_blank" title="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/">https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/</a>.</span></span></p>
						</td>
					</tr>
					<tr>
						<td>
						<p>Cannot Be Moved</p>
						</td>
						<td>
						<p>Logic apps</p>
						</td>
						<td>
						<p>N/A</p>
						</td>
						<td>
						<p>Out of Scope. For details, see: <span><span><a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/" target="_blank" title="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/">https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/</a>.</span></span></p>
						</td>
					</tr>
				</tbody>
			</table>
			</li>
		</ul>
		</li>
	</ul>
	</li>
	<li>
	<p><span><strong><span>Leverage the following table to organize your pre-requisite data. Add rows to the table as needed to take notes on all your research results.</span></strong></span></p>

	<table class="table">
		<tbody>
			<tr>
				<td>
				<p><strong><span><span>Check List</span></span></strong></p>
				</td>
				<td>
				<p align="center"><strong><span><span> Validated/Results</span></span></strong></p>
				</td>
			</tr>
			<tr>
				<td>
				<p><span><span>Source ID:</span></span></p>

				<p><span><span>Destination ID:</span></span></p>
				</td>
				<td>
				<p>&nbsp;</p>
				</td>
			</tr>
			<tr>
				<td>
				<p><strong><span><span>Offer Types</span></span></strong></p>

				<p><span><span>Any restrictions for data migration?</span></span></p>

				<p><span><span>Source offer type:</span></span></p>

				<p><span><span>Destination offer type:</span></span></p>
				</td>
				<td>
				<p>&nbsp;</p>
				</td>
			</tr>
			<tr>
				<td>
				<p><span><span>Both subscriptions are active?</span></span></p>

				<p><span><span>Source status:</span></span></p>

				<p><span><span>Destination status:</span></span></p>
				</td>
				<td>
				<p>&nbsp;</p>
				</td>
			</tr>
			<tr>
				<td>
				<p><span><span>Approval from all account owners?</span></span></p>

				<p><span><span>Source account owner?</span></span></p>

				<p><span><span>Destination account owner?</span></span></p>
				</td>
				<td>
				<p>&nbsp;</p>
				</td>
			</tr>
			<tr>
				<td>
				<p><span><span>Any dunning/write-off concerns?</span></span></p>
				</td>
				<td>&nbsp;</td>
			</tr>
			<tr>
				<td>
				<p><span><span>(Forced Migrations only) Co-admins? Destination has no co-admins or has 1 co-admin with PUID that matches SA or Co-admin PUID on source.</span></span></p>
				</td>
				<td>
				<p>&nbsp;</p>
				</td>
			</tr>
			<tr>
				<td>
				<p><strong><span><span>Quotas</span></span></strong></p>

				<p><span><span>Is the destination quota &gt;= source quota?</span></span></p>
				</td>
				<td>
				<p>&nbsp;</p>
				</td>
			</tr>
			<tr>
				<td>
				<p><span><span>Are there any restrictions on services to be moved? (Mobile services, ACS, etc.)?</span></span></p>

				<p><span><span>Services that won&#39;t move:</span></span></p>

				<p><span><span>Services customer will have to move:</span></span></p>

				<p><span><span>Services we will move:</span></span></p>

				<p><span><span>(Forced Migrations only) Co-admins?</span></span></p>
				</td>
				<td>
				<p>&nbsp;</p>
				</td>
			</tr>
			<tr>
				<td>
				<p><span><span>Destination is empty?</span></span></p>
				</td>
				<td>
				<p>&nbsp;</p>
				</td>
			</tr>
			<tr>
				<td>
				<p><span><span>ARM services?</span></span></p>
				</td>
				<td>
				<p>&nbsp;</p>
				</td>
			</tr>
			<tr>
				<td>
				<p><span><span>Any affinity groups/deployments of same name?</span></span></p>
				</td>
				<td>
				<p>&nbsp;</p>
				</td>
			</tr>
			<tr>
				<td>
				<p><strong><span><span>Datacenters</span></span></strong></p>

				<p><span><span>Are the datacenters used in the source subscription enabled in the destination?</span></span></p>
				</td>
				<td>
				<p>&nbsp;</p>
				</td>
			</tr>
			<tr>
				<td>
				<p><span><span>Please attach the error screenshot if Normal Transfer is failing.</span></span></p>

				<p><span><span>(for use if escalating failed simple data migration, or if Forced Migration is requested)</span></span></p>
				</td>
				<td>
				<p>&nbsp;</p>
				</td>
			</tr>
		</tbody>
	</table>
	</li>
</ol>

<h3><a id="SupportScenarios" name="SupportScenarios"></a>Support Scenarios</h3>

<p>After you have completed all the pre-requisite checks in the <a bookmark-id="Policy" href="#Policy" managed-link=""><span><em><span>Policy</span></em> </span></a><span><span> </span></span><span>section,</span> and the customer has agreed to continue, proceed with subscription migration by following the steps below.</p>

<h4><a id="PerformingASubscriptionMigration" name="PerformingASubscriptionMigration"></a>Performing a Subscription Migration</h4>

<p><strong><span>Note: </span></strong><span><span>You are about to reach the execution steps in the migration process. By performing these steps, you are confirming that you have carefully reviewed the previous validation steps above. Please note that by not reviewing the steps above, you could be putting the customer&rsquo;s services in jeopardy of downtime. If you can confirm that you have successfully completed the pre-requisite steps, move forward with the steps below. </span></span></p>

<ol>
	<li>
	<p><span><span> Email the customer with confirmation of the successful pre-requisite checks.</span><span> </span> Obtain their approval to begin the migration process.</span></p>
	</li>
	<li>
	<p><span> Execute a simple migration in Jarvis by doing the following:</span></p>

	<ol style="list-style-type:lower-alpha">
		<li>
		<p><span>Navigate to <strong>AzureRT &gt; Subscription Management &gt; Transfer Subscription</strong>.</span></p>
		</li>
		<li>
		<p>Enter the source and destination subscription GUIDs in their respective fields.</p>
		</li>
		<li>
		<p>Enter the Approver and Reviewer aliases.<br>
		<br>
		<strong>Note:</strong> They must be different.</p>
		</li>
		<li>
		<p>Enter Service Desk (SD) number under <em>Approver Link</em>.</p>
		</li>
		<li>
		<p>Click <strong>Execute</strong>.<span> </span></p>
		</li>
	</ol>
	</li>
	<li>
	<p><span> After the migration is complete, do the following:</span></p>

	<ol style="list-style-type:lower-alpha">
		<li>
		<p>Before performing any post-data migration sync operations in Jarvis, check that the subscription status is <em>Active/Enabled</em> in both the RDFE and ARM endpoints.</p>
		</li>
		<li>
		<p>Sync with RDFE and confirm simple migration success.</p>

		<ol style="list-style-type:lower-roman">
			<li>
			<p>Navigate to <strong>Azure</strong> <strong>Resource Manager &gt; Subscription State Management &gt; Synchronize subscription from RDFE</strong>.</p>
			</li>
			<li>
			<p>For <em>Subscription</em>, enter the source and destination subscription IDs.</p>
			</li>
		</ol>
		</li>
		<li>
		<p>Sync co-admins in the source and destination subscriptions using Jarvis.</p>

		<ol style="list-style-type:lower-roman">
			<li>
			<p>Endpoint: Azure Resource Manager</p>
			</li>
			<li>
			<p>Operation Group: Subscription State Management</p>
			</li>
			<li>
			<p>Operation: Synchronize subscription from RDFE</p>
			</li>
			<li>
			<p>Subscription: [Complete for both source and destination subscription IDs]</p>
			</li>
		</ol>
		</li>
		<li>
		<p>Obtain sync destination screenshot.</p>
		</li>
	</ol>
	</li>
</ol>

<ol start="4">
	<li>
	<p><span><span> If the customer has Service Bus (SB), it must be moved separately. This is a two part action that you will need </span><span><em>ramweb group</em> 18523 permissions </span><span> </span>to accomplish. Once you have these permissions, do the following:</span></p>

	<ol start="1" style="list-style-type:lower-alpha">
		<li>
		<p><strong>Transfer at the ACS endpoint.</strong><br>
		Note the following:</p>

		<ul style="list-style-type:disc">
			<li>
			<p><span>This is only required if an ACS endpoint exists, as they are no longer being created automatically.</span></p>
			</li>
			<li>
			<p><span>Requires JIT Access.</span></p>
			</li>
		</ul>

		<ol start="1" style="list-style-type:lower-roman">
			<li>
			<p><span> Navigate to <strong>ServiceBus &gt; Service Bus Namespace Operations &gt; Move Namespace to Subscription</strong>.</span><span> </span></p>
			</li>
			<li>
			<p><span>Provide the following information:</span></p>

			<ul style="list-style-type:circle">
				<li>
				<p><span>Old subscription ID</span></p>
				</li>
				<li>
				<p><span>Namespace name</span></p>
				</li>
				<li>
				<p><span>New subscription ID</span></p>
				</li>
				<li>
				<p><span>Approver alias </span></p>
				</li>
				<li>
				<p><span>Reviewer alias</span></p>
				</li>
				<li>
				<p><span>Case number<span> </span></span><span> </span></p>
				</li>
			</ul>
			</li>
			<li>
			<p><span>E<span>xecute the operations.</span><span> </span> You will get a zipped file as output.</span></p>
			</li>
		</ol>
		</li>
		<li>
		<p><span> <strong>Transfer at the SB endpoint.</strong></span></p>

		<ol style="list-style-type:lower-roman">
			<li>
			<p><span>Verify that the namespace migrated to the new subscription using the <em>Get Namespace info</em> operation in the Jarvis portal.<br>
			<br>
			<strong>Note:</strong> When attempting a migration from the Jarvis portal, you might get an error stating that &quot;Either source or destination is not active&quot;. Follow the below steps to enable the source and/or destination.</span></p>
			</li>
			<li>
			<p><span>In the Jarvis portal, navigate to <strong>Service Bus &gt; Service Bus Subscription Operations &gt; Create Subscription </strong>or<strong> Enable Subscription</strong> (based on the error received).</span></p>
			</li>
			<li>
			<p><span>Provide the Subscription ID that needs to be created/enabled and click <strong>Execute</strong>.</span></p>
			</li>
			<li>
			<p><span>Retry the previously attempted transfer operation.</span></p>
			</li>
		</ol>
		</li>
	</ol>
	</li>
</ol>

<ol start="5">
	<li>
	<p><span> Confirm with the customer that all services are running properly.</span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span>Verify that the customer has access to the necessary services based on their admin role. </span></p>
		</li>
		<li>
		<p><span>Instruct the customer to start the streaming endpoints for any Media Services in the destination subscription. </span></p>
		</li>
		<li>
		<p><span>If the migration is unsuccessful, gather screenshots of Jarvis errors showing that the migration failed, along with your pre-requisite notes, and engage WASU by following the guidance in <a href="https://internal.support.services.microsoft.com/en-us/help/2630659">TSG 2630659</a>.</span></p>
		</li>
	</ul>
	</li>
</ol>

<h4><a id="ResourceGroupSyncIssues" name="ResourceGroupSyncIssues"></a>Resource Group Sync Issues</h4>

<p>After a data migration with websites, a customer may get an error when trying to use their website/database. This is due to a Resource Group Sync issue.</p>

<p>Use <span>the steps below </span><span> </span>to perform a sync in Jarvis:</p>

<ol>
	<li>
	<p><span> Endpoint: Azure Resource Group </span></p>
	</li>
	<li>
	<p><span> Operation group: Resource Group Management </span></p>
	</li>
	<li>
	<p><span> Operation: &ldquo;Synchronize subscription resources&rdquo; </span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span>Check the output of this sync to see if Microsoft.Web is listed. If not, proceed to step 4. </span></p>
		</li>
	</ul>
	</li>
	<li>
	<p><span> To synchronize the Subscription Resources, add Microsoft.Web as the resource provider namespace.</span></p>

	<ul style="list-style-type:disc">
		<li>
		<p><span>You can also use the Get-Sub information to verify if the Resource is available. To do this, navigate to <strong>Get-Sub &gt; Subscriptions &gt; ARM &gt; Resource provider</strong>.</span></p>
		</li>
		<li>
		<p><span>Possible resources:</span></p>
		</li>
	</ul>
	</li>
</ol>

<ul style="list-style-type:circle">
	<li class="indent-2"><span>API Management</span></li>
	<li class="indent-2"><span>App Service apps (web apps) - see <a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/#app-service-limitations" target="_blank">App Service limitations</a></span></li>
	<li class="indent-2"><span>Automation</span></li>
	<li class="indent-2"><span>Batch</span></li>
	<li class="indent-2"><span>Cloud Services - see <a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/#classic-deployment-limitations" target="_blank">Classic deployment limitations</a></span></li>
	<li class="indent-2"><span>Data Factory</span></li>
	<li class="indent-2"><span>DNS</span></li>
	<li class="indent-2"><span>DocumentDB</span></li>
	<li class="indent-2"><span>HDInsight clusters</span></li>
	<li class="indent-2"><span>IoT Hubs</span></li>
	<li class="indent-2"><span>Key Vault</span></li>
	<li class="indent-2"><span>Media Services</span></li>
	<li class="indent-2"><span>Mobile Engagement</span></li>
	<li class="indent-2"><span>Notification Hubs</span></li>
	<li class="indent-2"><span>Operational Insights</span></li>
	<li class="indent-2"><span>Redis Cache</span></li>
	<li class="indent-2"><span>Scheduler</span></li>
	<li class="indent-2"><span>Search</span></li>
	<li class="indent-2"><span>Service Bus</span></li>
	<li class="indent-2"><span>Storage</span></li>
	<li class="indent-2"><span>Storage (classic) - see <a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/#classic-deployment-limitations" target="_blank">Classic deployment limitations</a></span></li>
	<li class="indent-2"><span>SQL Database server - The database and server must reside in the same resource group. When you move a SQL server, all of its databases are also moved.</span></li>
	<li class="indent-2"><span>Virtual Machines</span></li>
	<li class="indent-2"><span>Virtual Machines (classic) - see <a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/#classic-deployment-limitations" target="_blank">Classic deployment limitations</a></span></li>
	<li class="indent-2"><span>Virtual Networks<span> </span></span></li>
</ul>

<ol start="5">
	<li>
	<p><span> Perform the Operation &ldquo;Synchronize subscription from RDFE&rdquo;.</span></p>
	</li>
</ol>

<p><span>If a customer&rsquo;s </span><span>website was not transferred in an otherwise successful migration</span>, the website has a different resource group name. In these instances, ask the customer to move the website to the same resource group via PowerShell. See the customer-facing <a data-content-id="" data-content-type="" href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-move-resources/" managed-link="" target="_blank">Move resources to a new resource group or subscription</a> page for guidance.</p>

<p><span><span>Alternatively, if the customer is unwilling to use PowerShell, ask them to delete the unused resource group, and then attempt the migration again. </span></span><span><span> </span></span></p>

<h4><span lang="EN"><span><a id="ResourceValidationFailedAndSubscriptionNotRegisteredErrorsDuringARMMigrations" name="ResourceValidationFailedAndSubscriptionNotRegisteredErrorsDuringARMMigrations"></a>&ldquo;Resource Validation failed&rdquo; and &ldquo;Subscription not registered&rdquo; Errors</span></span><span> </span><span lang="EN"><span> during ARM Migrations</span></span></h4>

<p>When a customer performs self-service migration of ARM resources during a data migration, they may get an error stating that &ldquo;<span><span>Resource Validation failed&rdquo; </span></span>or &ldquo;<span><span>Subscription not </span></span><span>registered</span>.&rdquo;</p>

<ul>
	<li>
	<p>These error messages arise when a customer tries to transfer a service to the destination subscription that is either not registered on the destination or whose region is not enabled for ARM service on the destination.</p>
	</li>
</ul>

<p><span lang="EN"><span>To determine whether the resource is registered on the destination subscription and whether its region is enabled for ARM service, do the following in Jarvis:</span></span></p>

<ol>
	<li>
	<p><span> Navigate to <strong>Azure Resource Manager &gt; Resource Provider Management &gt; Get Resource Providers for a subscription</strong></span></p>
	</li>
	<li>
	<p><span> Look for &ldquo;Subscription: [Subscription ID]&rdquo;.</span></p>
	</li>
</ol>

<p>After checking this, direct the customer to either register the resource <span>or engage &nbsp;Capacity Management </span><span> </span>to enable the region.</p>

<p><span lang="EN"><span>Steps to register the resource provider can be found on this public-facing page:</span></span><span><span><br>
<a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-supported-services#resource-providers-and-types" target="_blank">https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-supported-services#resource-providers-and-types</a></span></span></p>

<h4><a id="CodingAndClosingProcedures" name="CodingAndClosingProcedures"></a>Coding and Closing Procedures</h4>

<ul>
	<li>
	<p><span>Product: Azure Subscription &ndash; Ibiza</span></p>
	</li>
	<li>
	<p><span>Root Cause: Azure Sub Mgmt V1\Subscription Requests\Data Migration\Simple Migration</span></p>
	</li>
</ul>

<h3><a id="EngagementAndEscalationPath" name="EngagementAndEscalationPath"></a>Engagement and Escalation Path</h3>

<h4><a id="JarvisErrorsAndExceptions" name="JarvisErrorsAndExceptions"></a>Jarvis errors and exceptions</h4>

<p>If Jarvis throws an error or an exception when you attempt to run one of the Jarvis commands, and you have already verified that you have the necessary RAMWeb access permissions for Jarvis use, notify the Jarvis team of the error by emailing <a data-content-id="" data-content-type="" href="mailto:acisesc@microsoft.com" managed-link="" target="_blank">acisesc@microsoft.com</a>.</p>

<h3><a id="OnlineReferences" name="OnlineReferences"></a>Online References</h3>

<h4><a id="RelatedTSGs" name="RelatedTSGs"></a>Related TSGs</h4>

<ul>
	<li>
	<p><a href="https://internal.support.services.microsoft.com/en-us/help/2892044" target="_blank">TSG 2892044</a> (Forced Data Migrations)</p>
	</li>
	<li>
	<p><a href="https://internal.support.services.microsoft.com/en-us/help/2929022" target="_blank">TSG 2929022</a> (TA/PTA and Manager Engagement Process)</p>
	</li>
</ul>

<ul>
	<li>
	<p><a href="https://internal.support.services.microsoft.com/en-us/help/3093263" target="_blank">TSG 3093263</a> (ASE Engagement)</p>
	</li>
	<li>
	<p><a href="https://internal.support.services.microsoft.com/en-us/help/2630659" target="_blank">TSG 2630659</a> <span> </span>(WASU Engagement)</p>
	</li>
</ul>

<h4><span><span><span><a id="UpdatingTenantID" name="UpdatingTenantID"></a>Updating Tenant ID</span></span></span></h4>

<p>Customers may refer to the below pages for steps to update their Tenant IDs.</p>

<ul>
	<li>
	<p><a data-content-id="" data-content-type="" href="https://docs.microsoft.com/en-us/azure/active-directory/active-directory-how-subscriptions-associated-directory" managed-link="" target="_blank">https://docs.microsoft.com/en-us/azure/active-directory/active-directory-how-subscriptions-associated-directory</a></p>
	</li>
</ul>

<h3><a id="TSGChangeLog" name="TSGChangeLog"></a>TSG Change Log</h3>

<table class="table">
	<tbody>
		<tr>
			<td width="132">
			<p><span><strong>Date </strong></span></p>
			</td>
			<td width="126">
			<p><span><strong>Updated By </strong></span></p>
			</td>
			<td width="364">
			<p><span><strong>Content Updated </strong></span></p>
			</td>
		</tr>
		<tr>
			<td width="132">
			<p><span><span>10/06/2020</span></span></p>
			</td>
			<td width="126">
			<p><span><span>v-ishan</span></span></p>
			</td>
			<td width="364">
			<p><span><span><span>Comprehensive Rewrite: Updated TSG content and formatting as part of the TSG Refresh Project. </span></span></span></p>
			</td>
		</tr>
	</tbody>
</table>
</div>
</div>
