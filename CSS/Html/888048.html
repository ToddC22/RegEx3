<header><h1>The domain name may not appear in its correct form in the DNS record of a Windows 2000-based or Windows Server 2003-based domain controller</h1></header><div class='kb-notice-section section'><div internal-content-body=""><div class="internal-content"><div class="bold internal-content-body-title spacer-12-bottom">Microsoft Internal Support Information</div><div class="row"><div class="col-xs-24 internal-content-body-content"><p>BUG #: <a href='http://bugcheck/bugs/ContentMaintenance/28284.asp' title='Link only available for Microsoft corporate network users' target='_blank'>28284 (Content Maintenance)</a></p></div></div></div></div></div><div class='kb-symptoms-section section'>When you use a Microsoft Windows 2000 Server-based or Microsoft Windows Server 2003-based domain controller, some services of the Active Directory directory service, such as Lightweight Directory Access Protocol (LDAP) services, may not function correctly. When you try to troubleshoot the domain controller, you may also experience the following symptoms:<ul class='sbody-free_list'><li>When you examine the Netlogon.dns file, you see text entries that display only the host name of the domain controller and not the fully qualified domain name (FQDN). </li><li>When you run the Dcdiag.exe command-line tool at the command prompt, the output indicates that the FQDN of the domain controller could not be resolved.</li><li>When you use the DNS  snap-in to examine the DNS record in the _msdcs DNS zone, the FQDN of the domain controller appears as <strong class='sbody-strong'>ServerName</strong>, where <strong class='sbody-strong'>ServerName</strong> is the name of the Windows DNS server.</li><li>When you restart the domain controller, the Windows Server 2003 operating system recognizes the  domain controller as a host that does not have a domain name. For example, if the FQDN of the domain controller is host.domain.com, the operating system recognizes only the host name (&quot;host&quot;) and not the domain name (&quot;domain.com&quot;).</li><li>When the DNS service is started, the following event is recorded in the   DNS server  event log:</li><li>When you try to restart the Exchange System Attendant service on a computer that is running Microsoft Exchange 2000 Server, the service does not start.</li></ul></div><div class='kb-cause-section section'>This issue may occur because of a corrupted registry entry in the following registry subkey: <div class='indent'><strong class='sbody-strong'>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters </strong></div>One of more of the following registry entries in this registry subkey may be corrupted: <ul class='sbody-free_list'><li>Domain </li><li>Hostname </li><li>NV Domain</li><li>NV Hostname</li></ul>If Active Directory Service Location (SRV) resource records refer to the incorrect domain name, the domain controller cannot resolve the domain name. Because of this, Active Directory services may not work correctly.</div><div class='kb-resolution-section section'><span><span class='text-base'>Important</span> This section, method, or task contains steps that tell you how to modify the registry. However, serious problems might occur if you modify the registry incorrectly. Therefore, make sure that you follow these steps carefully. For added protection, back up the registry before you modify it. Then, you can restore the registry if a problem occurs. For more information about how to back up and restore the registry, click the following article number to view the article in the Microsoft Knowledge Base: <div class='indent'><a id='kb-link-1' href='/en-us/help/322756'>322756 </a> How to back up and restore the registry in Windows</div></span><br><br>To resolve this issue, use Registry Editor to remove and re-create the registry entries that are mentioned in the &quot;Cause&quot; section. To do this, follow these steps:<ol class='sbody-num_list'><li>Click <strong class='uiterm'>Start</strong>, click <strong class='uiterm'>Run</strong>, type <strong class='uiterm'>regedit</strong> in the <strong class='uiterm'>Open</strong> box, and then click <strong class='uiterm'>OK</strong>.</li><li>In Registry Editor, locate and then click the following registry subkey:<br><br> <div class='indent'><strong class='uiterm'>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters</strong></div></li><li>In the right pane, right-click <strong class='uiterm'>Domain</strong>, and then click <strong class='uiterm'>Delete</strong>.<br></li><li>When you are prompted to confirm the deletion, click <strong class='uiterm'>Yes</strong>.</li><li>Repeat steps 3 and 4 for the Hostname,  NV Domain,  and NV Hostname registry entries.</li><li>On the <strong class='uiterm'>Edit</strong> menu, point to <strong class='uiterm'>New</strong>, and then click <strong class='uiterm'>String Value</strong>.<br></li><li>Type <span class='sbody-userinput'>Domain</span>, and then double-click <strong class='uiterm'>Domain</strong>.</li><li>In the <strong class='uiterm'>Value data </strong>box, type the Active Directory domain name, and then click <strong class='uiterm'>OK</strong>.  For example, you may type <span class='sbody-userinput'>contoso.com </span>as the domain name.</li><li>Repeat steps 6 through 8 for the NV Domain registry entry.</li><li>On the <strong class='uiterm'>Edit</strong> menu, point to <strong class='uiterm'>New</strong>, and then click <strong class='uiterm'>String Value</strong>.</li><li>Type <strong class='uiterm'>Hostname</strong>, and then double-click <strong class='uiterm'>Hostname</strong>. </li><li>In the <strong class='uiterm'>Value data</strong> box, type the computer name, and then click <strong class='uiterm'>OK</strong>.</li><li>Repeat steps 10 through 12 for the NV Hostname registry value. </li><li>Quit Registry Editor. </li><li>Click <strong class='uiterm'>Start</strong>, click <strong class='uiterm'>Run</strong>, type <strong class='uiterm'>services.msc</strong> in the <strong class='uiterm'>Open</strong> box, and then click <strong class='uiterm'>OK</strong>.</li><li>In the right pane of the <strong class='uiterm'>Services</strong> window, locate and then click <strong class='uiterm'>Net Logon</strong>. </li><li>On the <strong class='uiterm'>Action</strong> menu, click <strong class='uiterm'>Stop</strong>.</li><li>On the <strong class='uiterm'>Action</strong> menu, click <strong class='uiterm'>Start</strong>.</li></ol></div><div class='kb-moreinformation-section section'><span><h3 class='sbody-h3'>Technical support for Windows x64 editions</h3> Your hardware manufacturer provides technical support and assistance for Microsoft Windows x64 editions. Your hardware manufacturer provides support because a Windows x64 edition was included with your hardware. Your hardware manufacturer might have customized the Windows x64 edition installation with unique components. Unique components might include specific device drivers or might include optional settings to maximize the performance of the hardware. Microsoft will provide reasonable-effort assistance if you need technical help with your Windows x64 edition. However, you might have to contact your manufacturer directly. Your manufacturer is best qualified to support the software that your manufacturer installed on the hardware.<br><br>For product information about Microsoft Windows XP Professional x64 Edition, visit the following Microsoft Web site:<div class='indent'><a id='kb-link-2' href='http://www.microsoft.com/windowsxp/64bit/default.mspx' target='_self'>http://www.microsoft.com/windowsxp/64bit/default.mspx</a></div> For product information about Microsoft Windows Server 2003 x64 editions, visit the following Microsoft Web site:<div class='indent'><a id='kb-link-3' href='http://www.microsoft.com/windowsserver2003/64bit/x64/editions.mspx' target='_self'>http://www.microsoft.com/windowsserver2003/64bit/x64/editions.mspx</a></div></span></div><div class='kb-securedata-section section'>Winx64 Windowsx64 64bit 64-bit</div><div class='kb-securedata-section section'>Author: jellis<br>Writer: v-vimalk<br>Tech Reviewer: v-dahedm<br> Editor:  v-anwale</div>