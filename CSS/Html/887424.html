<header><h1>&quot;DsRemoveDsDomainW error 0x2015&quot; error message when you use Ntdsutil to try to remove metadata for a domain controller that was removed from your network in Windows Server 2003</h1></header><div class='kb-notice-section section'>Template: zGeneric Problem Article</div><div class='kb-notice-section section'><div internal-content-body=""><div class="internal-content"><div class="bold internal-content-body-title spacer-12-bottom">Microsoft Internal Support Information</div><div class="row"><div class="col-xs-24 internal-content-body-content"><p>BUG #: <a href='http://bugcheck/bugs/ContentMaintenance/28258.asp' title='Link only available for Microsoft corporate network users' target='_blank'>28258 (Content Maintenance)</a></p></div></div></div></div><div internal-content-body=""><div class="internal-content"><div class="bold internal-content-body-title spacer-12-bottom">Microsoft Internal Support Information</div><div class="row"><div class="col-xs-24 internal-content-body-content"><p>BUG #: <a href='http://bugcheck/bugs/SO/SOX040225700094.asp' title='Link only available for Microsoft corporate network users' target='_blank'>SOX040225700094 (SO)</a></p></div></div></div></div></div><div class='kb-symptoms-section section'>When you use the Ntdsutil command-line tool to try to remove metadata for a  domain controller that was removed from your network,  you may receive the following error message:<div class='sbody-error'> DsRemoveDsDomainW error 0x2015 (The directory service can perform the requested operation only on a leaf object.)</div></div><div class='kb-cause-section section'>This issue may occur when the application partition naming context  (DC=DomainDnsZones) for the child domain  is not removed when Active Directory is removed from the  domain controller.</div><div class='kb-resolution-section section'>To resolve this issue, follow these steps:<ol class='sbody-num_list'><li>Click <strong class='uiterm'>Start</strong>, click <strong class='uiterm'>Run</strong>, type <span class='sbody-userinput'>ntdsutil</span>, and then press ENTER.</li><li>At the Ntdsutil command  prompt, type <span class='sbody-userinput'>domain management</span>, and then press ENTER.</li><li>Type <span class='sbody-userinput'>connections</span>, and then press ENTER.</li><li>Type <span class='sbody-userinput'>connect to server <strong class='sbody-strong'>Domain_Controller_Name</strong></span>, and then press ENTER.</li><li>After the following message appears, type <span class='sbody-userinput'>quit</span>, and then press ENTER:<div class='message'>Connected to <strong class='sbody-strong'>Domain_Controller_Name</strong> using credentials of locally logged on user</div></li><li>At the domain management prompt, type <span class='sbody-userinput'>list</span>, and then press ENTER.</li><li>Note the following entry:<div class='indent'>DC=DomainDnsZones,DC=<strong class='sbody-strong'>Child_Domain</strong>, DC=<strong class='sbody-strong'>extension</strong></div>For example, if the child domain is Contoso.com, note the following entry:<div class='indent'>DC=DomainDnsZones,DC=contoso,DC=com</div></li><li>Type the following command, and then press ENTER.<div class='indent'><span class='sbody-userinput'>delete nc dc=domaindnszones,dc=<strong class='sbody-strong'>Child_Domain</strong>,dc=<strong class='sbody-strong'>extension</strong></span></div><span class='text-base'>Note</span>    In this command, <strong class='sbody-strong'>Child_Domain</strong> represents the name of the child domain that you want to remove. For example, if the child domain is Contoso.com, type the following command, and then press ENTER:<div class='indent'><span class='sbody-userinput'>delete nc dc=domaindnszones,dc=contoso,dc=com</span></div></li><li>Quit Ntdsutil.</li></ol></div><div class='kb-securedata-section section'>Author: dbrandt<br>Writer: v-dehaas<br>Tech Reviewer: v-mikekh<br>Editor:  v-jocoop</div>