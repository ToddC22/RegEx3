<header><h1>Flow IcM Connector FAQs</h1></header><p>In order to use the &quot;Create or update an IcM Incident&quot; action to create an incident on your service/team, you&#39;ll need to register the Flow IcM Connector&#39;s public key with IcM. Once you have done this, IcM will generate a connector ID for your service. This is the ID which you will provide in your Flow.</p>

<ol style="list-style-type:decimal" type="1">
	<li value="1">The Flow IcM Connector&#39;s public key can be found <a href="https://icmdatastore.blob.core.windows.net/icmdata/flowicmpublickey2.cer" managed-link="">here</a>.</li>
	<li>Register a new connector with IcM for your service, using the Flow IcM Connector&#39;s certificate, at&nbsp;<a href="https://portal.microsofticm.com/imp/v3/administration/connectoronboarding">https://portal.microsofticm.com/imp/v3/administration/connectoronboarding</a>. You must be an admin for your service to do so.
	<ol>
		<li><span asset="4552725" contenteditable="false" props="{&quot;size&quot;:&quot;full&quot;}" unselectable="on">[Asset 4552725]</span></li>
	</ol>
	</li>
	<li>Use the connector ID generated by IcM in the &quot;ConnectorId&quot; field of the &quot;Create or update an IcM incident&quot; action.</li>
</ol>

<p>&nbsp;</p>

<h4>IcM Certificate Rollover</h4>

<p>If you are noticing that your calls are failing with a message similar to&nbsp;&quot;Certificate subject: [CN=flow-icm-connector.flow.cloudapp.net]... is not associated with connector with id ...&quot; you need to roll over your IcM cert.&nbsp;Please note that you must be a service administrator to perform these steps.</p>

<ol>
	<li>Navigate to IcM and go to the Administration =&gt; Manage Services tab.</li>
	<li>In the &quot;Manage Services&quot; page, scroll down and select the &quot;Connectors and Webhooks&quot; tab.</li>
	<li>Find the connector corresponding to the Flow IcM connector and click &quot;Edit&quot;. The certificate subject should be &quot;CN-flow-icm-connector.flow.cloudapp.net&quot;.</li>
	<li>In &quot;Certificate Upload&quot;, upload the&nbsp;<strong>new</strong>&nbsp;Flow IcM connector certificate and select &quot;Populate&quot;.</li>
	<li>Press &quot;Submit&quot; at the bottom right of the page.</li>
</ol>
<p>To make your incidents update the hit count on an existing incident, you need to setup your incidents to correlate. In order to do so you need to specify a correlation id in the &quot;CorrelationId&quot; field. This value should be unique to your alert.</p>

<p>In addition to matching the correlation id, the incident must also exactly match in its &quot;Environment&quot; and &quot;Cloud Instance&quot; fields to correlate. Additionally your service may have specified additional fields that must match to correlate.&nbsp;These can be checked at&nbsp;<a href="https://portal.microsofticm.com/imp/CorrelationRules.aspx" managed-link="">https://portal.microsofticm.com/imp/CorrelationRules.aspx</a>.</p>

<p>For additional details please see&nbsp;<a href="https://icmdocs.azurewebsites.net/administration/rules/correlation-rules.html">https://icmdocs.azurewebsites.net/administration/rules/correlation-rules.html</a>.&nbsp;</p>
<ol style="list-style-type:decimal" type="1">
	<li value="1">In order to use custom fields, you must use the &quot;Create or update an IcM incident&quot; action. No other action supports custom fields, not even &quot;Create an IcM incident&quot; which deceptively claims to support custom fields. You will need to onboard the IcM connector to their service to do this - see above.</li>
	<li>You will need to expand advanced options to see the &quot;CustomFields&quot; property.</li>
	<li>Look up your service at this link: <a href="https://icm.ad.msft.net/imp/CustomFieldsLookup.aspx">https://icm.ad.msft.net/imp/CustomFieldsLookup.aspx</a></li>
	<li>The fields in the IcM connector match to the page as follows:</li>
</ol>

<table class="table">
	<tbody>
		<tr>
			<td>
			<p>IcM Connector</p>
			</td>
			<td>
			<p>Reference Page</p>
			</td>
		</tr>
		<tr>
			<td>
			<p>PublicId</p>
			</td>
			<td>
			<p>Category Type (we only support Tenant or FrontEndCategory)</p>
			</td>
		</tr>
		<tr>
			<td>
			<p>ContainerPublicId</p>
			</td>
			<td>
			<p>Category Public Id</p>
			</td>
		</tr>
		<tr>
			<td>
			<p>FieldSet Key</p>
			</td>
			<td>
			<p>Name (in the table)</p>
			</td>
		</tr>
		<tr>
			<td>
			<p>FieldSet Value</p>
			</td>
			<td>
			<p>The value you would like to populate the field with (must match the specified type)</p>
			</td>
		</tr>
	</tbody>
</table>
<p>Please contact the Flow secondary on call to update the services list. The current on call can be found on IcM (Flow Triage team).</p>
<p>The Flow IcM connector does not have support for IcM triggers. You are likely using Geneva Monitoring&#39;s IcM connector. Please contact Mehul Parekh for assitance with their connector.</p>
<p>Most of the Flow IcM connector&#39;s actions directly call the IcM API with little to no modification of the values. Documentation on the IcM API can be found at aka.ms/icmhelp.&nbsp;</p>
