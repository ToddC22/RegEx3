<header><h1>INFO: Preventing the Console Window from Disappearing</h1></header><div class='kb-summary-section section'>When a console application is started either from the File Manager, the Program Manager, Windows NT Explorer, or by typing <span class='sbody-userinput'>start &lt;progname&gt;</span> from the command prompt, it executes in its own console. This console disappears as soon as the application terminates, and therefore the user can&#39;t read anything written to the screen between the last pause and program exit. There are two approaches to keep the console window from disappearing.<br></div><div class='kb-moreinformation-section section'><h3 class='sbody-h3'>Method 1: Pause if Process is Running in Separate Console</h3>The first method is for implementing a console application to not terminate immediately when it is running in a separate console window. It is not likely that you would want an application to always pause after displaying information to the console window when you started from the prompt. However, there is no API (application programming interface) that directly determines whether or not the application shares a console with CMD.EXE. This method looks at the current location of the console cursor, and if it is (0,0), then the program assumes it is running in a separate console window.<br><br><h3 class='sbody-h3'>Sample Code</h3><div class='sbody-code'><pre><code>   #include &lt;windows.h&gt;<br>   #include &lt;stdio.h&gt;<br>   #include &lt;conio.h&gt;<br><br>   CONSOLE_SCREEN_BUFFER_INFO csbi;<br>   HANDLE hStdOutput;<br>   BOOL bUsePause;<br><br>   void main(void)<br>   {<br>      hStdOutput = GetStdHandle(STD_OUTPUT_HANDLE);<br>      if (!GetConsoleScreenBufferInfo(hStdOutput, &amp;csbi))<br>      {<br>         printf(&quot;GetConsoleScreenBufferInfo failed: %d\n&quot;, GetLastError());<br>         return;<br>      }<br><br>      // if cursor position is (0,0) then use pause<br>      bUsePause = ((!csbi.dwCursorPosition.X) &amp;&amp;<br>                   (!csbi.dwCursorPosition.Y));<br><br>      printf(&quot;Interesting information to read.\n&quot;);<br>      printf(&quot;More interesting information to read.\n&quot;);<br><br>      // only pause if running in separate console window.<br>      if (bUsePause)<br>      {<br>         int ch;<br>         printf(&quot;\n\tPress any key to exit...\n&quot;);<br>         ch = getch();<br>      }<br>   }<br></code></pre></div>NOTE: This method will not work if the user combines a clear screen (CLS) and execution of the application into one step (for example, [C:\] CLS &amp; &lt;progname&gt;), because the cursor position will be (0, 0), but the application is using the console, which belongs to CMD.EXE.<br><br><h3 class='sbody-h3'>Method 2: Start the console with cmd.exe /K</h3>This method is for starting a console application in a separate window and forcing the window to remain after the application has terminated. An application can use the following command line with WinExec(), CreateProcess(), or in a batch file:<br><div class='indent'><span class='sbody-userinput'>   cmd /K consoleapp.exe<br></span></div>After consoleapp.exe has terminated, the /K switch makes the console window remain on the screen. The application user can then type the <span class='sbody-userinput'>exit</span>command to close the console window.<br></div><div class='kb-textlegacy-section section'>DOC INFO: DOC ID:6652 6652 Tech Reviewed By: SridharM kbsweptKernelBaseWin2000 Jan-11-2000 kbsweptWINXP_SDK v-kargif Dec-14-2001 Author: garypel (1993-05-23T00:00:00) Edit Reviewer: a-kathgl (1997-04-10T14:36:00) Tech Reviewer: sridharm (1997-04-10T14:36:00)<br></div>