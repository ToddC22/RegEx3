<header><h1>How To  Convert a UNIX time_t to a Win32 FILETIME or SYSTEMTIME</h1></header><div class='kb-summary-section section'>Under UNIX platforms, file times are maintained in the form of a ANSI C runtime arithmetic type named &#39;time_t&#39;, which represents seconds since midnight January 1, 1970 UTC (coordinated universal time).<br><br><br>Under Win32 platforms, file times are maintained primarily in the form of a 64-bit FILETIME structure, which represents the number of 100-nanosecond intervals since January 1, 1601 UTC (coordinate universal time).<br><br><br>This article shows how to convert UNIX time to other Win32 time formats.<br></div><div class='kb-moreinformation-section section'>The following function converts a filetime in the UNIX time_t format to a Win32 FILETIME format. Note that time_t is a 32-bit value and FILETIME is a 64-bit structure, so the Win32 function, Int32x32To64() is used in the following function:<br><br><div class='sbody-code'><pre><code>   #include &lt;winbase.h&gt;<br>   #include &lt;winnt.h&gt;<br>   #include &lt;time.h&gt;<br><br>   void UnixTimeToFileTime(time_t t, LPFILETIME pft)<br>   {<br>     // Note that LONGLONG is a 64-bit value<br>     LONGLONG ll;<br><br>     ll = Int32x32To64(t, 10000000) + 116444736000000000;<br>     pft-&gt;dwLowDateTime = (DWORD)ll;<br>     pft-&gt;dwHighDateTime = ll &gt;&gt; 32;<br>   }<br></code></pre></div>Once the UNIX time is converted to a FILETIME structure, other Win32 time formats can be easily obtained by using Win32 functions such as FileTimeToSystemTime() and FileTimeToDosDateTime().<br><br><div class='sbody-code'><pre><code>   void UnixTimeToSystemTime(time_t t, LPSYSTEMTIME pst)<br>   {<br>     FILETIME ft;<br><br>     UnixTimeToFileTime(t, &amp;ft);<br>     FileTimeToSystemTime(&amp;ft, pst);<br>   }<br></code></pre></div></div><div class='kb-securedata-section section'>bse time tm filetime systemtime crt</div><div class='kb-textlegacy-section section'>DOC INFO: DOC ID:10969 10969 kbsweptKernelBaseWin2000 JAN-10-2000 kbsweptWINXP-SDK v-kargif Dec-21-2001 Author: raymondc (1997-04-22T18:30:00) Edit Reviewer: a-kathgl (1997-04-23T10:10:00) Tech Reviewer: sridharm (1997-04-23T10:10:00)<br></div>