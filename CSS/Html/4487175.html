<header><h1>ADDS: Security: WHFB: Tools: Scripts for collecting data when investigating Windows Authentication, Hybrid Identity and related scenarios</h1></header><span asset="4476087" contenteditable="false" unselectable="on" props="{&#34;size&#34;:&#34;full&#34;}">[Asset 4476087]</span><ul><li><strong>Content Idea (CI): </strong><a managed-link="" href="https://aka.ms/CIEdit?id=96583" target="" data-content-type="" data-content-id="" bookmark-id="">96583</a></li></ul><p><strong>Support Topic: </strong><ul><li>Windows\Windows 10\Windows 10\Windows Security Technologies\Account lockouts</li><li>Windows\Windows 10\Windows 10\Windows Security Technologies\Domain and forest trusts</li><li>Windows\Windows 10\Windows 10\Windows Security Technologies\Kerberos authentication</li><li>Windows\Windows 10\Windows 10\Windows Security Technologies\Legacy authentication (NTLM)</li><li>Windows\Windows 10\Windows 10\Windows Security Technologies\Secure channel issues</li><li>Windows\Windows 10\Windows 10\Windows Security Technologies\Windows Hello for Business</li><li>Windows\Windows 10\Windows 10\Certificates and Public Key Infrastructure\SSL or TLS</li></ul></p><div><p style="margin:0cm 0cm 0pt;font-family:&quot;Calibri&quot;,sans-serif;font-size:11pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">Abstract</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">The information provided in this article discusses the use of scripts that enable tracing, debug logging and collect data that can be used to investigate Windows Authentication, Hybrid Identity and related scenarios</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><b style="box-sizing:border-box;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">Authentication Script overview and location:</span></b><span lang="EN-GB" style="box-sizing:border-box;color:black;"></span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">The current Authentication scripts replace the need to use separate Auth scripts, NGC scripts, Smart Card scripts and Credential Provider scripts.</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">All these data collections can now be obtained using the current Auth scripts.</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">The goal is to eliminate the need for multiple data collections or complex plans involving multiple data collections for Windows Authentication, Hybrid Identity and related scenarios.&nbsp;</span></p><ul style="box-sizing:border-box;padding:0px 0px 0px 40px;font-size:14px;margin-bottom:0cm;"><li style="box-sizing:border-box;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">The latest version of the scripts can be found<b style="box-sizing:border-box;">&nbsp;</b></span><span lang="EN-GB" style="box-sizing:border-box;"><a href="https://github.com/CSS-Windows/WindowsDiag/tree/master/ADS/AUTH" style="box-sizing:border-box;text-decoration:underline;cursor:pointer;"><b style="box-sizing:border-box;"><span style="box-sizing:border-box;color:blue;">here</span></b></a></span><span lang="EN-GB" style="box-sizing:border-box;color:black;">. It is recommended that you always download the latest version.</span></li><li style="box-sizing:border-box;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">The version number can be found at the top of the script file.</span></li><li style="box-sizing:border-box;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">The current release is &quot;Version 2.6&quot;.</span><br style="box-sizing:border-box;"><br style="box-sizing:border-box;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">You can upload the scripts to DTM for the customer or send on email.</span><br style="box-sizing:border-box;"><br style="box-sizing:border-box;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span><br style="box-sizing:border-box;"><br style="box-sizing:border-box;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">The scripts enable and collect Windows operational event logging, ETL tracing for Windows Authentication/Hybrid Identity components, SCCM/MDM enrolment logging and Certificate enrolment logging.</span><br style="box-sizing:border-box;"><br style="box-sizing:border-box;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">The scripts also collect a number of logs and registry key exports for components related to Windows Authentication/Hybrid Identity scenarios.&nbsp;</span><br style="box-sizing:border-box;"><br style="box-sizing:border-box;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span><br style="box-sizing:border-box;"><br style="box-sizing:border-box;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">Summary of data collected by ETL tracing;</span><br style="box-sizing:border-box;"><br style="box-sizing:border-box;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></li></ul><table style="box-sizing:border-box;border-collapse:collapse;border-spacing:0px;margin:0px;font-size:14px;"><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">#</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:1pt solid windowtext;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:1pt solid windowtext;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">1.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;">Ngc.etl</span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;">WHFB, WH, Device registration, User provisioning, NGC cred provider, Certificate client enrolment, MDM enrolment, Cloud experience, Cloud join)</span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">2.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;">Biometric.etl</span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">Biometric and Face providers + WinBio framework&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">3.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;">Lsa.etl</span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;color:black;background:white;">Negotiate SSP, other related LSA tracing and Vault/Credman tracing (Pre Windows 10, the tracing is collected in lsass.log)</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">4.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;">Ntlm_CredSSP.etl</span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;color:black;background:white;">NTLM and CredSSP tracing combined in the same ETL</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">5.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:Arial, sans-serif;">Kerberos.etl</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;color:black;background:white;">Kerberos tracing</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">6.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">KDC.ETL</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;color:black;background:white;">KDC tracing (only collected when run on a DC)</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">7.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">SAM.ETL&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;color:black;background:white;">SAM logging/tracing</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">8.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:Arial, sans-serif;">SSL.ETL</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;color:black;background:white;">SSL tracing (buffer is set to 1GB. Modify as required.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">9.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:Arial, sans-serif;">WebAuth.etl</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;color:black;background:white;">Token broker (WAM + Plugins),CloudAP, AAD, LiveID, WLid, MSA, Fido, Pku2u, Negoexts, Digest. There is also some basic webauth, wininet, winhttp and http.sys.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">10.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:Arial, sans-serif;">Smartcard.etl</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;color:black;background:white;">All Certificate related services and components (including the smart card cred provider)</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">11.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:Arial, sans-serif;">CredprovAuthui.etl</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;color:black;background:white;">Cryptographic Functions and Key management</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">12.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:Arial, sans-serif;">Netmon.etl</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;color:black;background:white;">Network trace buffer is 500MB. Modify as requred.&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">13.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">14.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr><tr style="box-sizing:border-box;"><td width="108" style="box-sizing:border-box;width:80.75pt;border-right:1pt solid windowtext;border-bottom:1pt solid windowtext;border-left:1pt solid windowtext;border-top:none;padding:0cm 5.4pt;"><p style="box-sizing:border-box;font-size:11pt;font-family:Calibri, sans-serif;margin:0cm 0cm 0.0001pt 36pt;text-indent:-18pt;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">15.</span><span lang="EN-GB" style="box-sizing:border-box;font-size:7pt;font-family:&quot;Times New Roman&quot;, serif;">&nbsp;&nbsp;&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="252" style="box-sizing:border-box;width:189pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td><td width="948" style="box-sizing:border-box;width:711pt;border-top:none;border-left:none;border-bottom:1pt solid windowtext;border-right:1pt solid windowtext;padding:0cm 5.4pt;"><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10pt;font-family:&quot;Segoe UI&quot;, sans-serif;">&nbsp;</span><span lang="EN-GB" style="box-sizing:border-box;font-size:12pt;font-family:&quot;Times New Roman&quot;, serif;"></span></p></td></tr></tbody></table><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">Data is collected into the “Authlogs” folder and subfolders.</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">There is a Authlogs\PreTracelogs folder that will contain data collected before the tracing was enabled, including export of any Windows operational logs where we clear or change the logging level from the default setting.&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><b style="box-sizing:border-box;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">Note For engineers who previously used the NGC scripts:</span></b><span lang="EN-GB" style="box-sizing:border-box;color:black;"></span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">All the information that the NGC scripts NGCtraceall, WebAuthtraceall and Biotraceall used to contain + more, will be in NGC, Webauth and Biometric etl collections</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">Most of the information that used to be in the kerbtraceall collection will be in the kerb etl and the rest will be in the LSA etl.&nbsp;&nbsp;<br style="box-sizing:border-box;"><br style="box-sizing:border-box;"></span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;font-size:10.5pt;font-family:&quot;Segoe UI&quot;, sans-serif;color:black;"><br style="box-sizing:border-box;">Please report any issues with the Auth scripts or new feature requests to ntuttle.&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><b style="box-sizing:border-box;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">Script Usage:- &nbsp;</span></b><span lang="EN-GB" style="box-sizing:border-box;"><a href="https://github.com/CSS-Windows/WindowsDiag/tree/master/ADS/AUTH" style="box-sizing:border-box;text-decoration:underline;cursor:pointer;"><b style="box-sizing:border-box;"><span style="box-sizing:border-box;color:blue;">https://github.com/CSS-Windows/WindowsDiag/tree/master/ADS/AUTH</span></b></a></span><span lang="EN-GB" style="box-sizing:border-box;color:black;"></span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">Create a directory on the device where the tracing is going to run - example c:\ms</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">copy start-auth.txt and stop-auth.txt to target and rename with .bat extensions</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">From an elevated command prompt (as admin), navigate to the c:\ms directory and run start-auth.bat to start the tracing</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">Once you have created the issue or reproduced the scenario, please run stop-auth.bat from the same location to stop the tracing and collect the required data.</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">Data is collected into a subdirectory of the directory from where this script is launched, called &quot;authlogs&quot;.</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">Please note that the start-auth script prompts for a &quot;Y&quot; user input after the data collection information is displayed, to allow the script to run.</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;<b style="box-sizing:border-box;">Script Usage notes:</b></span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">The script version number and the start/stop data collection times are written to the script-info.txt in the authlogs directory.</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span style="font-size:11pt;">Network trace:</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span style="font-size:11pt;"><br></span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;"></span></p><span>Network tracing is enabled by default in the scripts. If you do not want a network trace, please REM it out.<br></span><div>The default buffer size for network trace collection is 1024 MB, if you need a larger buffer then please edit the maxsize=xxxx value in the start-auth bat file, where the &quot;netsh trace&quot; command is being invoked.<br></div><div><br></div><span>Please note that for Client OS types the &quot;InternetClient&quot; scenario&nbsp;will be used to collect the network capture information, which also collects tcp, afd, webio, winhttp and wininet logging in the netmon.etl file.</span><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;"></span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;"><br></span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;"><br></span></p><div style="box-sizing:border-box;margin:0px 0cm 0.000133333px;font-size:11pt;font-family:Calibri, sans-serif;">Crypt/Ncrypt/Dpapi:<br></div><div style="box-sizing:border-box;margin:0px 0cm 0.000133333px;font-size:11pt;font-family:Calibri, sans-serif;"><br></div><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">By default, the Crypt, Ncrypt and Dpapi etl tracing is only enabled on client devices.</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">It is not enabled on server or DC's.</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">If you want to enable it on servers (ServerNT) or DC's (LanmanNT)&nbsp;&nbsp;then you will need to remove the relevant REM statements from the following lines in the start-auth and stop-auth bat files.</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">Note: Please be aware that it should not be enabled on servers or DC's for long running data collection.</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style="font-size:14px;display:inline !important;">From start-auth.bat</span></span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span style="font-size:11pt;">&nbsp; &nbsp; &nbsp; &nbsp; REM if %%i equ ServerNT logman start CryptNCryptDpapi -pf %_CRYPT_DPAPI_TRACES_TMP% -o %_LOG_DIR%\CryptNcryptDpapi.etl -ets</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp; &nbsp; &nbsp; &nbsp; REM if %%i equ LanmanNT logman start CryptNCryptDpapi -pf %_CRYPT_DPAPI_TRACES_TMP% -o %_LOG_DIR%\CryptNcryptDpapi.etl -ets</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style="font-size:14px;display:inline !important;">From Stop-auth.bat</span></span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp; &nbsp; &nbsp; &nbsp; REM if %%i equ ServerNT logman.exe stop CryptNCryptDpapi -ets</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp; &nbsp; &nbsp; &nbsp; REM if %%i equ LanmanNT logman.exe stop CryptNCryptDpapi -ets&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;">&nbsp;</span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;"><br></span></p><p style="box-sizing:border-box;margin:0cm 0cm 0.0001pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;color:black;"></span></p><span>ETL log size:</span><div><br><div>The logman collections apart from SSL are NOT limited in size.<br></div><div>If you wish to collect a long running data collection, please make the customer aware to monitor disk space usage.<br></div><div><br></div><div>If you know exactly which providers you are interested in for a long running collection (i.e. Kerberos delegation issue on middle tier server), then you can disable some of the providers that are not relevant.<br></div><div>Note: Disabling providers in the collection can be achieved by adding a REM statement to the beginning of the line for the start of the collection (start-auth) and stop of the collection (stop-auth)<br></div><div><br></div><div>The SSL data collection is limited to 1024 MB's.<br></div><div>If you feel you need a larger size, then please edit the &quot;max&quot; value in the following line in the start-auth bat file<br></div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;logman start SSL -pf %_SSL_TRACES_TMP% -o %_LOG_DIR%\SSL.etl -ets -max 1024<br></div><div><br></div><div><br></div><div>Certificate Enrolment logging:<br></div><div><br></div><div>By default, certificate enrolment verbose debug logging is only enabled on client devices.<br></div><div>It is not enabled on server or DC's.<br></div><div>If you want to enable it on servers (ServerNT) or DC's (LanmanNT) &nbsp;then you will need to remove the relevant REM statements from the following lines in the start-auth<br></div><div><span style=""><br></span></div><div><span style="">&nbsp; &nbsp; &nbsp; &nbsp; REM if %%i equ ServerNT certutil -setreg -f Enroll\Debug 0xffffffe3 &gt; NUL</span><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; REM if %%i equ LanmanNT certutil -setreg -f Enroll\Debug 0xffffffe3 &gt; NUL<br></div><div><br></div><div><br></div><div>Schannel logging:<br></div><div><br></div><div>The schannel logging will be captured in the SSL.etl file.<br></div><div>If you wish to see additional logging into the System event log, then please remove the REM statement from the following lines;<br></div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; From start-auth.bat</div><div>&nbsp; &nbsp; &nbsp; &nbsp; REM reg add HKLM\System\CurrentControlSet\Control\SecurityProviders\SCHANNEL /v EventLogging /t REG_DWORD /d 7 /f &gt; NUL 2&gt;&amp;1<br></div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; From Stop-auth.bat</div><div>&nbsp; &nbsp; &nbsp; &nbsp; REM reg add HKLM\System\CurrentControlSet\Control\SecurityProviders\SCHANNEL /v EventLogging /t REG_DWORD /d 1 /f &gt; NUL 2&gt;&amp;1<br></div><div><br></div><div>Note: The above logging is very verbose.<br></div><div>	<br></div><div><br></div><div>SystemInfo collection:<br></div><div><br></div><div>By default, the systeminfo collection is currently not enabled. <br></div><div>It was disabled due to delays in collecting the info when the scripts are being stopped.<br></div><div>If you wish to collect the systeminfo output, please remove the REM from the following line in the stop-auth.bat file or collect it as a separate operation.<br></div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; REM Systeminfo &gt; %_LOG_DIR%\SystemInfo.txt<br></div><div><br></div><div><br></div><div>Security Event log:<br></div><div><br></div><div>The security event log is not collected in these scripts.<br></div><div>If you wish to collect it, please get permission from the customer and collect it manually at the end of the data collection.<br></div><div>Note: Please do not add the collection of the security event log to the scripts.<br></div><div><br></div><div><br></div><div>PSR Collection:<br></div><div><br></div><div>For privacy reasons, the authentication scripts do not collect PSR data.<br></div><div>If you wish to collect it, please get permission from the customer and collect it manually in parallel with the auth script collection.<br></div><div><br></div><div>PSR can be started and stopped using the following commands;<br></div><div>Note: Please do not add these to the auth script for collection - run them separately.<br></div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; psr /start /output psr.zip /maxsc 999 /gui 0<br></div><span>&nbsp; &nbsp; &nbsp; &nbsp; psr /stop</span><p style="box-sizing:border-box;margin:0cm 0cm 8pt;font-size:11pt;font-family:Calibri, sans-serif;"><span lang="EN-GB" style="box-sizing:border-box;"></span></p><br><blockquote style="margin-top:0px;margin-bottom:0px;" dir="ltr"><div style="margin:0px 0cm;font-family:&quot;Calibri&quot;,sans-serif;font-size:11pt;"></div></blockquote></div></div><div><div>If you have any issues with the scripts please contact ntuttle.</div><div><br></div><div>If you have any suggestions as to how the scripts could be improved, please contact ntuttle.</div><div><br></div></div>