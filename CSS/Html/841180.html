<header><h1>Oracle database service startup process stops responding</h1></header><div>After you install the MS04-011 Security Update for Microsoft Windows on a computer that runs Oracle database 8i, the computer may stop responding during the startup process. The MS04-0ll Security Update is described in the following Microsoft Security Bulletin:<div class='indent'><a id='kb-link-1' href='http://www.microsoft.com/technet/security/bulletin/ms04-011.mspx' target='_self'>http://www.microsoft.com/technet/security/bulletin/ms04-011.mspx</a></div></div><div class='kb-securedata-section section'>If you remove the security update that is described in Microsoft Security Bulletin MS04-011, you may not notice this problem.</div><div class='kb-workaround-section section'>To work around this problem, use one of the following methods.<h3 class='sbody-h3'>Method 1: Manually start the Oracle database service</h3>Change the startup behavior of the Oracle database service to a manual type on the computer that runs the Oracle database, and then start the Oracle database service manually. To do so, follow these steps: <br> <ol class='sbody-num_list'><li>Change the startup type of the Oracle database service to manual. To do so, follow these steps: <br><ol class='sbody-alpha_list'><li>Click <strong class='uiterm'>Start</strong>, point to<br> <strong class='uiterm'>Settings</strong>, and then click <strong class='uiterm'>Control Panel</strong>.</li><li>In Control Panel, double-click<br> <strong class='uiterm'>Administrative Tools</strong>.</li><li>In the Administrative Tools window, double-click <strong class='uiterm'> Services</strong>.</li><li>In the right pane of the Services window, double-click <strong class='uiterm'>OracleService&lt;SID&gt;</strong>.</li><li>In the <strong class='uiterm'>OracleService&lt;SID&gt; Properties (Local Computer)</strong> dialog box, click the <strong class='uiterm'>General</strong> tab.</li><li>Click <strong class='uiterm'>Manual</strong> in the <strong class='uiterm'>Startup type</strong> list, and then click <strong class='uiterm'>OK</strong>.</li></ol></li><li> Change the startup setting of the instance of Oracle database such that the instance of Oracle database does not automatically start when the Oracle database service is started. To do so, follow these steps.<br><br><span><span class='text-base'>Important</span> This section, method, or task contains steps that tell you how to modify the registry. However, serious problems might occur if you modify the registry incorrectly. Therefore, make sure that you follow these steps carefully. For added protection, back up the registry before you modify it. Then, you can restore the registry if a problem occurs. For more information about how to back up and restore the registry, click the following article number to view the article in the Microsoft Knowledge Base: <div class='indent'><a id='kb-link-2' href='/en-us/help/322756'>322756 </a> How to back up and restore the registry in Windows</div></span><ol class='sbody-alpha_list'><li>Click <strong class='uiterm'>Start</strong>, and then click<br> <strong class='uiterm'>Run</strong>.</li><li>In the <strong class='uiterm'>Open</strong> box, type<br> <strong class='uiterm'>regedit</strong>, and then click <strong class='uiterm'>OK</strong>.</li><li>In Registry Editor, locate the following registry key: <strong class='sbody-strong'>HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\HOME0</strong><br><br><span class='text-base'>Note</span> The name of this registry key ends with the number zero (0), not the letter o.</li><li>In the right pane of Registry Editor, double click <strong class='uiterm'>ORA_&lt;SID&gt;_AUTOSTART</strong>.<br><br><span class='text-base'>Note</span>: Replace &lt;SID&gt; with the name of the Oracle database service.</li><li>In the <strong class='uiterm'>Edit String</strong> dialog box, type <span class='sbody-userinput'>FALSE</span> in the <strong class='uiterm'>Value data</strong> box,  and then click <strong class='uiterm'>OK</strong>.</li><li>Close Registry Editor.</li></ol></li><li>Create the following batch file with the name StartupOracleORCL.sql:<div class='sbody-code'><pre><code>connect &lt;username&gt;/&lt;password&gt;<br>startup PFILE=&lt;Full path of the INIT.ORA file for the instance of Oracle database&gt;<br><br>exit</code></pre></div></li><li>Create the following Windows batch file with the name Orastart.bat in the same folder where you created the StartupOracleORCL.sql batch file  in step 3:<div class='sbody-code'><pre><code>@echo off<br><br>net start &lt;Oracle Service Name&gt;<br>set ORACLE_SID=&lt;Oracle SID&gt; <br>svrmgrl @&lt;Full path of startupOracleORCL.sql created in Step 3&gt;<br><br>exit</code></pre></div><br><span class='text-base'>Note</span> You must replace &lt;Oracle Service Name&gt; and &lt;Oracle SID&gt; with the Oracle database service name and the SID of the Oracle database service, respectively.</li><li>Run the Orastart.bat file at a command prompt.<br><br><span class='text-base'>Note</span> You may notice that the instance of Oracle database starts successfully.</li></ol><h3 class='sbody-h3'>Method 2: Automate the startup of the Oracle services by using Windows Resource Kit utilities</h3>To automate the startup of the Oracle services by using the Service Installer utility (Instsrv.exe) and the Applications as Services utility (Srvany.exe), follow these steps.<br><br><span class='text-base'>Note</span> The Service Installer utility (Instsrv.exe) and the Applications as Services utility (Srvany.exe) are included with the Windows Server 2003 Resource Kit.<ol class='sbody-num_list'><li>Download and install the Windows Resource Kit utilities. <span><img class="graphic" src="/library/images/support/kbgraphics/public/en-us/download.gif" alt="Download " title="Download "><a id='kb-link-3' href='http://www.microsoft.com/download/details.aspx?familyid=9d467a69-57ff-4ae7-96ee-b18c4790cffd&amp;displaylang=en' target='_self'>Download the Rktools.exe package now.</a></span></li><li>Create a folder that is named OracleStartup on the root of drive C.</li><li>In the C:\OracleStartup folder, create a text file that is named OracleStartup.reg and that contains the following information:<div class='sbody-code'><pre><code>REGEDIT4<br><br>[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\OracleStartup\Parameters]<br>&quot;Application&quot;=&quot;C:\\OracleStartup\\OracleStartup.cmd&quot;<br><br>[HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\HOME0]<br>&quot;ORA_ORCL_AUTOSTART&quot;=hex(2):34,00,36,00,2c,00,30,00,30,00,2c,00,34,00,31,00,2c,00,30,00,30,\<br>  00,2c,00,34,00,63,00,2c,00,30,00,30,00,2c,00,35,00,33,00,2c,00,30,00,30,00,\<br>  2c,00,34,00,35,00,2c,00,30,00,30,00,2c,00,30,00,30,00,2c,00,30,00,30,00,00,\<br>  00</code></pre></div></li><li>Double-click the C:\OracleStartup\Oracle.reg text file to import the information into your registry.</li><li>In the C:\OracleStartup folder, create a text file that is named OracleStartup.cmd and that contains the following information:<div class='sbody-code'><pre><code>sleep 60<br>net start OracleServiceORCL<br>SET ORACLE_SID=ORCL<br>svrmgrl @C:\OracleStartup\OracleStartup.sql<br>sleep 15<br>EXIT</code></pre></div></li><li>Create a C:\OracleStartup\OracleStartup.sql text file that contains the following information:<div class='sbody-code'><pre><code>connect internal/oracle<br>startup PFILE=C:\init.ora</code></pre></div><span class='text-base'>Note</span> The startup parameter must include the fully qualified path of the Init.ora file. <br><br><span class='text-base'>Important</span> The C:\OracleStartup\OracleStartup.cmd file contains user credentials in clear text.  Therefore, restrict access to this file to administrators and to the Oracle service startup account only. You may be able to avoid including user credentials in the C:\OracleStartup\OracleStartup.cmd file by configuring the Oracle Server for Windows Authentication.  For information about how to configure Oracle for Windows authentication, obtain Note: 60634.1  (WIN: Setup O/S Authentication) from Oracle Corporation. For information about how to contact Oracle Corporation, visit the following Web site:<div class='indent'><a id='kb-link-4' href='http://www.oracle.com/' target='_self'>http://www.oracle.com/</a></div></li><li>Start OracleStartup as a service by using the InstSrv.exe and the SrvAny.exe resource kit utilities and by using the following commands:<br><br><span class='sbody-userinput'>&quot;C:\Program Files\Resource Kit\instsrv.exe&quot; OracleStartup &quot;C:\Program Files\Resource Kit\SRVAny.exe&quot;<br>sc config &quot;OracleServiceORCL&quot; start= demand<br>exit</span></li><li>Restart Windows.</li></ol></div><div class='kb-moreinformation-section section'><span>The third-party products that this article discusses are manufactured by companies that are independent of Microsoft. Microsoft makes no warranty, implied or otherwise, regarding the performance or reliability of these products.<br><br></span><span>Microsoft provides third-party contact information to help you find technical support. This contact information may change without notice. Microsoft does not guarantee the accuracy of this third-party contact information.<br></span></div><div class='kb-securedata-section section'>oracle database service startup failure hangs MS04-011 security update</div><div class='kb-securedata-section section'>Author: GaryW<br>Writer: haribaskar.janarthanam@wipro.com (v-9harib)<br>Tech Reviewer: Srikant.Jahagirdar@wipro.com (Partners\v-9srikantj)<br>Editor: v-tcarey</div>